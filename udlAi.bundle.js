function n(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var o,a,r,i,l=[],c=!0,s=!1;try{if(r=(e=e.call(n)).next,0===t){if(Object(e)!==e)return;c=!1}else for(;!(c=(o=r.call(e)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(n){s=!0,a=n}finally{try{if(!c&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(n,e)||t(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(n,t){if(n){if("string"==typeof n)return e(n,t);var o={}.toString.call(n).slice(8,-1);return"Object"===o&&n.constructor&&(o=n.constructor.name),"Map"===o||"Set"===o?Array.from(n):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(n,t):void 0}}function e(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,o=Array(t);e<t;e++)o[e]=n[e];return o}!function(){if(document.getElementById("udl-accessibility-panel"))return document.getElementById("udl-accessibility-panel").remove(),void C();var o=sessionStorage.getItem("udl_api_key");if(!o){if(!(o=prompt("UDL 분석을 위한 API KEY를 입력해주세요.")))return void alert("API KEY가 입력되지 않았습니다. UDL 분석을 실행할 수 없습니다.");sessionStorage.setItem("udl_api_key",o)}function a(){return new Promise((function(n,t){if(window.axe)return n(window.axe);var e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/axe-core/4.7.0/axe.min.js",e.onload=function(){return n(window.axe)},e.onerror=function(){return t(new Error("axe-core 로드 실패"))},document.head.appendChild(e)}))}var r=o,i={perception:{name:"인식의 용이성",items:[{id:"1.1.1",name:"적절한 대체 텍스트 제공",desc:"텍스트 아닌 콘텐츠는 그 의미나 용도를 인식할 수 있도록 대체 텍스트를 제공해야 한다."},{id:"1.2.1",name:"자막 제공",desc:"멀티미디어 콘텐츠에는 자막, 대본 또는 수어를 제공해야 한다."},{id:"1.3.1",name:"표의 구성",desc:"표는 이해하기 쉽게 구성해야 한다."},{id:"1.3.2",name:"콘텐츠의 선형구조",desc:"콘텐츠는 논리적인 순서로 제공해야 한다."},{id:"1.3.3",name:"명확한 지시사항 제공",desc:"지시사항은 모양, 크기, 위치, 방향, 색, 소리 등에 관계없이 인식될 수 있어야 한다."},{id:"1.4.1",name:"색에 무관한 콘텐츠 인식",desc:"콘텐츠는 색에 관계없이 인식될 수 있어야 한다."},{id:"1.4.2",name:"자동 재생 금지",desc:"자동으로 소리가 재생되지 않아야 한다."},{id:"1.4.3",name:"텍스트 콘텐츠의 명도 대비",desc:"텍스트 콘텐츠와 배경 간의 명도 대비는 4.5 대 1 이상이어야 한다."},{id:"1.4.4",name:"콘텐츠 간의 구분",desc:"이웃한 콘텐츠는 구별될 수 있어야 한다."}]},operation:{name:"운용의 용이성",items:[{id:"2.1.1",name:"키보드 사용 보장",desc:"모든 기능은 키보드만으로도 사용할 수 있어야 한다."},{id:"2.1.2",name:"초점 이동과 표시",desc:"키보드에 의한 초점은 논리적으로 이동해야 하며, 시각적으로 구별할 수 있어야 한다."},{id:"2.1.3",name:"조작 가능",desc:"사용자 입력 및 컨트롤은 조작 가능하도록 제공되어야 한다."},{id:"2.1.4",name:"문자 단축키",desc:"문자 단축키는 오동작으로 인한 오류를 방지하여야 한다."},{id:"2.2.1",name:"응답시간 조절",desc:"시간제한이 있는 콘텐츠는 응답시간을 조절할 수 있어야 한다."},{id:"2.2.2",name:"정지 기능 제공",desc:"자동으로 변경되는 콘텐츠는 움직임을 제어할 수 있어야 한다."},{id:"2.3.1",name:"깜빡임과 번쩍임 사용 제한",desc:"초당 3~50회 주기로 깜빡이거나 번쩍이는 콘텐츠를 제공하지 않아야 한다."},{id:"2.4.1",name:"반복 영역 건너뛰기",desc:"콘텐츠의 반복되는 영역은 건너뛸 수 있어야 한다."},{id:"2.4.2",name:"제목 제공",desc:"페이지, 프레임, 콘텐츠 블록에는 적절한 제목을 제공해야 한다."},{id:"2.4.3",name:"적절한 링크 텍스트",desc:"링크 텍스트는 용도나 목적을 이해할 수 있도록 제공해야 한다."},{id:"2.4.4",name:"고정된 참조 위치 정보",desc:"전자출판문서 형식의 웹 페이지는 각 페이지로 이동할 수 있는 기능이 있어야 하고, 서식이나 플랫폼에 상관없이 참조 위치 정보를 일관되게 제공ㆍ유지해야 한다."},{id:"2.5.1",name:"단일 포인터 입력 지원",desc:"다중 포인터 또는 경로기반 동작을 통한 입력은 단일 포인터 입력으로도 조작할 수 있어야 한다."},{id:"2.5.2",name:"포인터 입력 취소",desc:"단일 포인터 입력으로 실행되는 기능은 취소할 수 있어야 한다."},{id:"2.5.3",name:"레이블과 네임",desc:"텍스트 또는 텍스트 이미지가 포함된 레이블이 있는 사용자 인터페이스 구성요소는 네임에 시각적으로 표시되는 해당 텍스트를 포함해야 한다."},{id:"2.5.4",name:"동작기반 작동",desc:"동작기반으로 작동하는 기능은 사용자 인터페이스 구성요소로 조작할 수 있고, 동작기반 기능을 비활성화할 수 있어야 한다."}]},comprehension:{name:"이해의 용이성",items:[{id:"3.1.1",name:"기본 언어 표시",desc:"주로 사용하는 언어를 명시해야 한다."},{id:"3.2.1",name:"사용자 요구에 따른 실행",desc:"사용자가 의도하지 않은 기능(새 창, 초점에 의한 맥락 변화 등)은 실행되지 않아야 한다."},{id:"3.2.2",name:"찾기 쉬운 도움 정보",desc:"도움 정보가 제공되는 경우, 각 페이지에서 동일한 상대적인 순서로 접근할 수 있어야 한다."},{id:"3.3.1",name:"오류 정정",desc:"입력 오류를 정정할 수 있는 방법을 제공해야 한다."},{id:"3.3.2",name:"레이블 제공",desc:"사용자 입력에는 대응하는 레이블을 제공해야 한다."},{id:"3.3.3",name:"접근 가능한 인증",desc:"인증 과정은 인지 기능 테스트에만 의존해서는 안 된다."},{id:"3.3.4",name:"반복 입력 정보",desc:"반복되는 입력 정보는 자동 입력 또는 선택 입력할 수 있어야 한다."}]},robustness:{name:"견고성",items:[{id:"4.1.1",name:"마크업 오류 방지",desc:"마크업 언어의 요소는 열고 닫음, 중첩 관계 및 속성 선언에 오류가 없어야 한다."},{id:"4.2.1",name:"웹 애플리케이션 접근성 준수",desc:"콘텐츠에 포함된 웹 애플리케이션은 접근성이 있어야 한다."}]}},l={engagement:{name:"다양한 방식의 학습 참여 수단",desc:"학습자의 흥미와 동기를 유발하고 적극적인 참여를 촉진하기 위해 다양한 방법 제공",suggestions:["흥미 유발을 위한 선택권 제공하기","지속적으로 노력하고 끈기를 갖도록 하는 선택권 제공하기","자기조절 능력을 키우기 위한 선택권 제공하기"]},representation:{name:"다양한 방식의 표상 수단",desc:"학습 내용을 다양한 방식으로 제공하여 모든 학습자가 정보를 이해할 수 있도록 지원",suggestions:["정보를 인지하는 것의 선택권 제공하기","언어와 기호의 선택권 제공하기","이해를 돕기 위해 다양한 선택권 제공하기"]},action:{name:"다양한 방식의 행동과 표현 수단",desc:"학습자가 자신의 지식과 이해를 표현하는 방법에 다양한 선택권 제공",suggestions:["신체적 표현 방식에서 선택권 제공하기","표현과 의사소통의 선택권 제공하기","실행기능에 따른 선택권 제공하기"]}},c=document.createElement("style");c.textContent='\n      /* 패널 기본 스타일 */\n      #udl-accessibility-panel {\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        width: 600px;\n        max-width: 90vw;\n        height: 90vh;\n        background: white;\n        border-radius: 8px;\n        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);\n        display: flex;\n        flex-direction: column;\n        z-index: 99999;\n        overflow: hidden;\n        resize: both;\n        min-width: 300px;\n        min-height: 300px;\n        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;\n        font-size: 14px;\n        line-height: 1.5;\n        color: #212529;\n      }\n      .panel-header {\n        padding: 16px 20px;\n        background: linear-gradient(135deg, #3a7bd5, #2c5282);\n        color: white;\n        font-weight: bold;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        cursor: move;\n      }\n      .panel-title {\n        font-size: 16px;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n      .panel-controls {\n        display: flex;\n        gap: 8px;\n      }\n      .panel-btn {\n        background: none;\n        border: none;\n        color: white;\n        font-size: 18px;\n        cursor: pointer;\n        width: 24px;\n        height: 24px;\n        border-radius: 4px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: background 0.2s;\n      }\n      .panel-btn:hover {\n        background: rgba(255,255,255,0.2);\n      }\n      .panel-tabs {\n        display: flex;\n        background-color: #f8f9fa;\n        border-bottom: 1px solid #e9ecef;\n        padding: 0 4px;\n      }\n      .panel-tabs button {\n        flex: 1;\n        padding: 12px 8px;\n        border: none;\n        background: none;\n        cursor: pointer;\n        font-weight: 500;\n        color: #495057;\n        position: relative;\n        transition: all 0.2s;\n      }\n      .panel-tabs button:hover {\n        color: #3a7bd5;\n        background-color: rgba(58, 123, 213, 0.05);\n      }\n      .panel-tabs button.tab-active {\n        color: #3a7bd5;\n        font-weight: 600;\n      }\n      .panel-tabs button.tab-active::after {\n        content: \'\';\n        position: absolute;\n        bottom: 0;\n        left: 10%;\n        width: 80%;\n        height: 3px;\n        background-color: #3a7bd5;\n        border-radius: 3px 3px 0 0;\n      }\n      .tab-content {\n        flex: 1;\n        overflow-y: auto;\n        padding: 16px;\n        background-color: #ffffff;\n      }\n      .panel-footer {\n        display: flex;\n        justify-content: space-between;\n        padding: 12px 16px;\n        border-top: 1px solid #e9ecef;\n        background-color: #f8f9fa;\n        gap: 8px;\n      }\n      .button {\n        display: inline-flex;\n        align-items: center;\n        gap: 6px;\n        padding: 8px 12px;\n        border-radius: 4px;\n        border: none;\n        font-weight: 500;\n        font-size: 13px;\n        cursor: pointer;\n        transition: background-color 0.2s;\n      }\n      .primary-btn {\n        background-color: #3a7bd5;\n        color: white;\n      }\n      .primary-btn:hover {\n        background-color: #2c5282;\n      }\n      .secondary-btn {\n        background-color: #e9ecef;\n        color: #495057;\n      }\n      .secondary-btn:hover {\n        background-color: #ced4da;\n      }\n      .contrast-summary {\n        background: #f8f9fa;\n        padding: 16px;\n        border-radius: 8px;\n        margin-bottom: 20px;\n        border: 1px solid #e9ecef;\n      }\n      .contrast-summary h3 {\n        margin-top: 0;\n        margin-bottom: 12px;\n        font-size: 16px;\n        color: #343a40;\n      }\n      .contrast-summary p {\n        margin: 8px 0;\n        color: #495057;\n      }\n      .progress-bar {\n        height: 8px;\n        background: #e9ecef;\n        border-radius: 4px;\n        overflow: hidden;\n        margin-top: 10px;\n      }\n      .progress-bar-fill {\n        height: 100%;\n        background: linear-gradient(90deg, #3a7bd5, #00c6ff);\n        transition: width 0.5s ease;\n      }\n      .contrast-section {\n        margin-bottom: 24px;\n      }\n      .section-header {\n        font-size: 16px;\n        font-weight: 600;\n        margin-bottom: 12px;\n        padding-bottom: 8px;\n        border-bottom: 1px solid #e9ecef;\n        color: #343a40;\n      }\n      .contrast-item {\n        padding: 12px;\n        border-radius: 6px;\n        margin-bottom: 12px;\n        cursor: pointer;\n        transition: all 0.2s;\n        border-left: 4px solid;\n        display: flex;\n        flex-direction: column;\n        gap: 4px;\n      }\n      .contrast-item:hover {\n        transform: translateY(-2px);\n        box-shadow: 0 4px 8px rgba(0,0,0,0.05);\n      }\n      .contrast-fail {\n        border-color: #fa5252;\n        background: rgba(250, 82, 82, 0.05);\n      }\n      .contrast-pass {\n        border-color: #40c057;\n        background: rgba(64, 192, 87, 0.05);\n      }\n      .color-info {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        margin-top: 8px;\n      }\n      .color-preview {\n        width: 24px;\n        height: 24px;\n        border-radius: 4px;\n        border: 1px solid rgba(0,0,0,0.1);\n      }\n      .color-text {\n        font-family: monospace;\n        font-size: 12px;\n        color: #495057;\n      }\n      .label {\n        display: inline-block;\n        padding: 2px 6px;\n        border-radius: 4px;\n        font-size: 12px;\n        font-weight: 600;\n        margin-right: 6px;\n        color: white;\n      }\n      .label-aa { background: #40c057; }\n      .label-aaa { background: #339af0; }\n      .label-fail { background: #fa5252; }\n      \n      .item-highlight {\n        outline: 3px solid #ff922b !important;\n        outline-offset: 2px;\n        position: relative;\n        z-index: 9000;\n      }\n      \n      .category-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 12px;\n        background-color: #f8f9fa;\n        border-radius: 6px;\n        margin-bottom: 12px;\n        cursor: pointer;\n        border-left: 4px solid #3a7bd5;\n      }\n      .category-header h3 {\n        margin: 0;\n        font-size: 15px;\n      }\n      .category-header .icon {\n        transition: transform 0.3s;\n      }\n      .category-header.collapsed .icon {\n        transform: rotate(-90deg);\n      }\n      .category-content {\n        margin-left: 16px;\n        margin-bottom: 20px;\n        overflow: hidden;\n        transition: max-height 0.3s;\n      }\n      .category-content.collapsed {\n        max-height: 0;\n        margin-bottom: 0;\n      }\n      \n      .guideline-item {\n        margin-bottom: 12px;\n        padding: 12px;\n        border-radius: 6px;\n        background-color: rgba(233, 236, 239, 0.3);\n        border-left: 3px solid #6c757d;\n        cursor: pointer;\n        transition: all 0.2s;\n      }\n      .guideline-item:hover {\n        background-color: rgba(233, 236, 239, 0.6);\n      }\n      .guideline-item.fail {\n        border-left-color: #fa5252;\n        background-color: rgba(250, 82, 82, 0.05);\n      }\n      .guideline-item.pass {\n        border-left-color: #40c057;\n        background-color: rgba(64, 192, 87, 0.05);\n      }\n      .guideline-item h4 {\n        margin: 0 0 8px 0;\n        font-size: 14px;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n      .guideline-item p {\n        margin: 0;\n        font-size: 13px;\n        color: #495057;\n      }\n      \n      .udl-category {\n        margin-bottom: 24px;\n      }\n      .udl-category h3 {\n        font-size: 16px;\n        margin-top: 0;\n        margin-bottom: 12px;\n        color: #343a40;\n        padding-bottom: 8px;\n        border-bottom: 1px solid #e9ecef;\n      }\n      .udl-category p {\n        color: #495057;\n        margin-bottom: 12px;\n      }\n      .udl-suggestion {\n        background: #f1f8ff;\n        padding: 12px;\n        border-radius: 6px;\n        margin-bottom: 10px;\n        border-left: 3px solid #3a7bd5;\n      }\n      \n      .chat-messages {\n        flex: 1;\n        overflow-y: auto;\n        padding: 16px;\n        display: flex;\n        flex-direction: column;\n        gap: 16px;\n        background-color: #ffffff;\n        /* 스크롤 문제 해결을 위한 추가 속성 */\n        overflow-anchor: auto;\n        scroll-behavior: auto !important;\n        -webkit-overflow-scrolling: touch;\n        overscroll-behavior-y: contain;\n        scrollbar-width: thin;\n        position: relative;\n        padding-bottom: 100px !important; /* 하단 여백 추가 */\n        max-height: 60vh;  /* 뷰포트 높이의 60%로 제한 */\n        min-height: 300px; /* 최소 높이 설정 */\n        margin-bottom: 10px;\n      }\n\n      /* 메시지 겹침 방지 */\n      .chat-message {\n        max-width: 85%;\n        padding: 12px 16px;\n        border-radius: 18px;\n        word-break: break-word;\n        font-size: 13px;\n        line-height: 1.5;\n        margin-bottom: 4px;\n        z-index: 1;\n      }\n      .chat-user {\n        align-self: flex-end;\n        background-color: #3a7bd5;\n        color: white;\n        border-bottom-right-radius: 4px;\n      }\n      .chat-bot {\n        align-self: flex-start;\n        background-color: #f1f3f5;\n        color: #343a40;\n        border-bottom-left-radius: 4px;\n      }\n      \n      .chat-controls {\n        display: flex;\n        justify-content: space-between;\n        padding: 8px 16px;\n        border-top: 1px solid #e9ecef;\n        background-color: #f8f9fa;\n      }\n      .control-btn {\n        padding: 6px 12px;\n        background-color: #f8f9fa;\n        color: #495057;\n        border: 1px solid #ced4da;\n        border-radius: 4px;\n        font-size: 12px;\n        cursor: pointer;\n        transition: all 0.2s;\n      }\n      .control-btn:hover {\n        background-color: #e9ecef;\n      }\n      \n      .chat-input {\n        display: flex;\n        padding: 12px 16px;\n        border-top: 1px solid #e9ecef;\n        background-color: #ffffff;\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        z-index: 10;\n        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);\n        flex-shrink: 0;\n      }\n      .chat-input input {\n        flex: 1;\n        padding: 8px 12px;\n        border: 1px solid #ced4da;\n        border-radius: 24px;\n        font-size: 13px;\n        margin-right: 8px;\n        transition: border-color 0.2s;\n      }\n      .chat-input input:focus {\n        outline: none;\n        border-color: #3a7bd5;\n        box-shadow: 0 0 0 3px rgba(58, 123, 213, 0.1);\n      }\n      .chat-input button {\n        padding: 8px 14px;\n        background-color: #3a7bd5;\n        color: white;\n        border: none;\n        border-radius: 24px;\n        cursor: pointer;\n        font-weight: 500;\n        font-size: 13px;\n        transition: background 0.2s;\n        min-width: 60px; /* 버튼의 최소 너비 설정 */\n        white-space: nowrap; /* 텍스트 줄바꿈 방지 */\n        overflow: visible; /* 내용이 넘치더라도 표시 */\n      }\n      .chat-input button:hover {\n        background-color: #2c5282;\n      }\n      \n      .code-block {\n        background-color: #1E1E1E;\n        padding: 10px;\n        border-radius: 4px;\n        margin: 8px 0;\n        overflow-x: auto;\n        font-family: \'Consolas\', \'Monaco\', monospace;\n        font-size: 11px;\n        line-height: 1.4;\n        max-height: 300px;\n        border: 1px solid #333;\n      }\n      .code-line {\n        color: #D4D4D4;\n        white-space: pre;\n      }\n      .code-comment {\n        color: #6A9955;\n      }\n      .code-keyword {\n        color: #569CD6;\n      }\n      .code-string {\n        color: #CE9178;\n      }\n      \n      .loading {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        padding: 20px;\n        color: #6c757d;\n      }\n      .loading::after {\n        content: \'\';\n        width: 20px;\n        height: 20px;\n        margin-left: 10px;\n        border: 2px solid #ced4da;\n        border-radius: 50%;\n        border-top-color: #3a7bd5;\n        animation: spin 0.6s linear infinite;\n      }\n      @keyframes spin {\n        to { transform: rotate(360deg); }\n      }\n      \n      .report-section {\n        margin-bottom: 20px;\n      }\n      .report-section h3 {\n        margin-top: 0;\n        margin-bottom: 10px;\n        font-size: 16px;\n      }\n      .chat-bot p {\n        margin: 0 0 8px 0;\n        font-size: 13px;\n      }\n      .chat-bot h1, .chat-bot h2, .chat-bot h3, .chat-bot h4 {\n        font-size: 15px;\n        margin: 12px 0 8px 0;\n      }\n      .chat-bot ul, .chat-bot ol {\n        padding-left: 20px;\n        margin: 8px 0;\n      }\n      .chat-bot li {\n        font-size: 13px;\n        margin-bottom: 4px;\n      }\n      \n      /* 채팅 UI 개선 */\n      #tab-content-chat {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n        overflow: hidden;\n        position: relative;\n      }\n      .chat-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 10px 16px;\n        border-bottom: 1px solid #e9ecef;\n        background-color: #f8f9fa;\n        z-index: 2;\n        flex-shrink: 0;\n      }\n      .chat-header h3 {\n        margin: 0;\n        font-size: 14px;\n        font-weight: 600;\n        color: #495057;\n      }\n      .chat-action-btn {\n        border: none;\n        background: none;\n        color: #6c757d;\n        font-size: 13px;\n        padding: 4px 8px;\n        border-radius: 4px;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        gap: 4px;\n      }\n      .chat-action-btn:hover {\n        background-color: #e9ecef;\n        color: #495057;\n      }\n      .chat-messages {\n        flex: 1;\n        overflow-y: auto;\n        padding: 16px;\n        padding-bottom: 100px !important; /* 입력창보다 더 여유있게 수정 */\n        display: flex;\n        flex-direction: column;\n        gap: 16px;\n        background-color: #ffffff;\n        height: calc(100% - 50px); /* 헤더 높이 제외 */\n        /* 스크롤 문제 해결을 위한 추가 속성 */\n        overflow-anchor: auto;\n        scroll-behavior: auto !important;\n        -webkit-overflow-scrolling: touch;\n        overscroll-behavior-y: contain;\n        max-height: 60vh;  /* 뷰포트 높이의 60%로 제한 */\n        min-height: 300px; /* 최소 높이 설정 */\n        scrollbar-width: thin;\n        position: relative;\n        overflow-x: hidden; /* 가로 스크롤 방지 */\n      }\n      .chat-input {\n        display: flex;\n        padding: 12px 16px;\n        border-top: 1px solid #e9ecef;\n        background-color: #ffffff;\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        z-index: 10;\n        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);\n        flex-shrink: 0;\n      }\n      .chat-input input {\n        flex: 1;\n        padding: 8px 12px;\n        border: 1px solid #ced4da;\n        border-radius: 24px;\n        font-size: 13px;\n        margin-right: 8px;\n        transition: border-color 0.2s;\n      }\n      .chat-input input:focus {\n        outline: none;\n        border-color: #3a7bd5;\n        box-shadow: 0 0 0 3px rgba(58, 123, 213, 0.1);\n      }\n      .chat-input button {\n        padding: 8px 14px;\n        background-color: #3a7bd5;\n        color: white;\n        border: none;\n        border-radius: 24px;\n        cursor: pointer;\n        font-weight: 500;\n        font-size: 13px;\n        transition: background 0.2s;\n        min-width: 60px; /* 버튼의 최소 너비 설정 */\n        white-space: nowrap; /* 텍스트 줄바꿈 방지 */\n        overflow: visible; /* 내용이 넘치더라도 표시 */\n      }\n      .chat-input button:hover {\n        background-color: #2c5282;\n      }\n      \n      /* 개선된 요약 통계 스타일 */\n      .contrast-summary-content {\n        padding: 14px;\n        background-color: #f8f9fa;\n        border-radius: 6px;\n        margin-bottom: 16px;\n      }\n      .stats-row {\n        display: flex;\n        gap: 20px;\n        margin-bottom: 10px;\n        flex-wrap: wrap;\n      }\n      \n      /* 탭 공지사항 스타일 수정 */\n      .contrast-tab-notice {\n        color: #6c757d;\n        font-size: 12px;\n        margin: 5px 0;\n        font-style: italic;\n        text-align: right;\n      }\n      \n      /* 개선된 툴팁 스타일 */\n      .contrast-tooltip {\n        position: absolute;\n        display: none;\n        width: 320px;\n        background-color: #fff;\n        border: 1px solid #dee2e6;\n        border-radius: 6px;\n        box-shadow: 0 3px 12px rgba(0,0,0,0.15);\n        z-index: 100;\n        padding: 0;\n        right: 0;\n        top: calc(100% + 5px);\n        text-align: left;\n      }\n      .tooltip-content {\n        padding: 12px;\n      }\n      .tooltip-header {\n        font-weight: 600;\n        margin-bottom: 10px;\n        padding-bottom: 8px;\n        border-bottom: 1px solid #e9ecef;\n        color: #343a40;\n      }\n      .tooltip-item {\n        margin-bottom: 8px;\n        line-height: 1.4;\n        font-size: 12px;\n      }\n      .tooltip-label {\n        font-weight: 600;\n        color: #495057;\n      }\n      \n      /* 수동 컬러 피커 스타일 */\n      .manual-color-picker-tool {\n        padding: 15px;\n        background-color: #f8f9fa;\n        border-radius: 6px;\n        border: 1px solid #dee2e6;\n      }\n      \n      .color-picker-info {\n        margin-bottom: 12px;\n      }\n      \n      .info-text {\n        font-size: 13px;\n        color: #495057;\n        line-height: 1.5;\n      }\n      \n      .manual-color-picker-tool h3 {\n        font-size: 14px;\n        margin-top: 0;\n        margin-bottom: 12px;\n        display: flex;\n        align-items: center;\n        gap: 5px;\n      }\n      \n      .color-picker-container {\n        display: flex;\n        flex-direction: column;\n        gap: 15px;\n      }\n      .color-picker-row {\n        display: flex;\n        gap: 15px;\n        flex-wrap: wrap;\n      }\n      .color-input-group {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n      .color-input-group label {\n        font-size: 12px;\n        white-space: nowrap;\n      }\n      .color-input-group input[type="color"] {\n        width: 0;\n        height: 0;\n        padding: 0;\n        border: none;\n        overflow: hidden;\n        position: absolute;\n        opacity: 0;\n      }\n      \n      .color-button {\n        width: 40px;\n        height: 24px;\n        padding: 0;\n        border: 1px solid #ced4da;\n        border-radius: 4px;\n        background: transparent;\n        cursor: pointer;\n        position: relative;\n        overflow: hidden;\n      }\n      \n      .color-preview-btn {\n        display: block;\n        width: 100%;\n        height: 100%;\n      }\n      \n      .color-input-group input[type="text"] {\n        width: 80px;\n        height: 24px;\n        padding: 0 8px;\n        border: 1px solid #ced4da;\n        border-radius: 4px;\n        font-family: monospace;\n        font-size: 12px;\n      }\n      .color-preview-area {\n        display: flex;\n        gap: 15px;\n        align-items: center;\n      }\n      .manual-color-sample {\n        padding: 10px 15px;\n        border-radius: 4px;\n        min-width: 120px;\n        text-align: center;\n        font-size: 14px;\n        box-shadow: 0 0 0 1px rgba(0,0,0,0.1);\n      }\n      .manual-contrast-result {\n        font-size: 13px;\n      }\n      .contrast-result-text {\n        display: flex;\n        align-items: center;\n        font-size: 13px;\n        gap: 6px;\n      }\n      \n      .manual-contrast-status {\n        display: inline-block;\n        padding: 2px 6px;\n        border-radius: 4px;\n        font-size: 11px;\n        font-weight: 600;\n      }\n      \n      .manual-contrast-status.pass {\n        background-color: #e8f5e9;\n        color: #2e7d32;\n      }\n      \n      .manual-contrast-status.partial {\n        background-color: #fff3e0;\n        color: #e67700;\n      }\n      \n      .manual-contrast-status.fail {\n        background-color: #ffebee;\n        color: #d32f2f;\n      }\n      \n      /* 색상 코드 칩 디자인 개선 */\n      .color-chip {\n        display: flex;\n        align-items: center;\n        gap: 4px;\n        padding: 2px 4px;\n        border-radius: 4px;\n        background-color: #f8f9fa;\n        border: 1px solid #e9ecef;\n      }\n      .color-preview {\n        width: 16px;\n        height: 16px;\n        border-radius: 3px;\n        box-shadow: 0 0 0 1px rgba(0,0,0,0.1);\n      }\n      .color-code {\n        font-family: monospace;\n        font-size: 11px;\n      }\n      \n      /* 대비율 값 디자인 개선 */\n      .ratio-value {\n        font-size: 13px;\n        display: flex;\n        flex-direction: column;\n        text-align: left;\n      }\n      .criteria-label {\n        font-size: 11px;\n        margin-bottom: 2px;\n        color: #6c757d;\n      }\n      \n      /* 컬러 샘플 박스 개선 */\n      .color-sample-box {\n        padding: 8px 12px;\n        border-radius: 4px;\n        text-align: left;\n        min-width: 60px;\n        box-shadow: 0 0 0 1px rgba(0,0,0,0.1);\n      }\n      \n      /* 컨트라스트 정보 레이아웃 개선 */\n      .contrast-info-row {\n        display: flex;\n        align-items: center;\n        gap: 15px;\n      }\n      \n      /* 기존 스타일 끝 */\n    ',document.head.appendChild(c);var s=document.createElement("div");s.id="udl-accessibility-panel",s.style.cssText="\n      position: fixed;\n      z-index: 9999;\n      top: 20px;\n      right: 20px;\n      width: 600px;\n      height: 900px;\n      background-color: white;\n      box-shadow: 0 0 20px rgba(0,0,0,0.15);\n      border-radius: 8px;\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n      font-size: 14px;\n      line-height: 1.5;\n      color: #333;\n      resize: both;\n    ",s.innerHTML='\n      <div class="panel-header">\n        <h2 class="panel-title">접근성 검사</h2>\n        <div class="panel-controls">\n          <button class="panel-btn" id="minimize-panel" title="최소화">\n            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n              <line x1="5" y1="12" x2="19" y2="12"></line>\n            </svg>\n          </button>\n          <button class="panel-btn" id="close-panel" title="닫기">\n            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n              <line x1="18" y1="6" x2="6" y2="18"></line>\n              <line x1="6" y1="6" x2="18" y2="18"></line>\n            </svg>\n          </button>\n        </div>\n      </div>\n      <div class="panel-tabs">\n        <button id="tab-contrast" class="tab-active">명도 대비</button>\n        <button id="tab-wcag">웹 접근성 항목</button>\n        <button id="tab-udl">AI 제안</button>\n        <button id="tab-colorblind">색맹 시뮬레이션</button>\n        <button id="tab-chat">AI 챗봇</button>\n      </div>\n      <div id="tab-content-contrast" class="tab-content">\n        <div class="loading">검사 중...</div>\n      </div>\n      <div id="tab-content-wcag" class="tab-content" style="display:none;">\n        <div class="loading">검사 중...</div>\n      </div>\n      <div id="tab-content-udl" class="tab-content" style="display:none;">\n        <div class="loading">분석 중...</div>\n      </div>\n      <div id="tab-content-colorblind" class="tab-content" style="display:none;">\n        <div class="loading">색맹 시뮬레이션 도구 로딩 중...</div>\n      </div>\n      <div id="tab-content-chat" class="tab-content" style="display:none;">\n        <div class="chat-header">\n          <h3>UDL 및 웹 접근성 문의</h3>\n          <button id="reset-chat-btn" class="chat-action-btn">\n            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n              <polyline points="1 4 1 10 7 10"></polyline>\n              <polyline points="23 20 23 14 17 14"></polyline>\n              <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>\n            </svg>\n            새 대화 시작\n          </button>\n        </div>\n        <div class="chat-messages"></div>\n        <div class="chat-input">\n          <input type="text" id="chat-input-field" placeholder="웹 접근성에 대해 물어보세요" />\n          <button id="chat-send-btn">전송</button>\n        </div>\n      </div>\n      <div class="panel-footer">\n        <div class="left-buttons">\n          \x3c!-- 채팅 관련 버튼은 여기에 동적으로 추가됩니다 --\x3e\n          <button id="download-chat-btn" class="button secondary-btn chat-control-btn" style="display:none;">\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>\n              <polyline points="7 10 12 15 17 10"></polyline>\n              <line x1="12" y1="15" x2="12" y2="3"></line>\n            </svg>\n            대화 내용 다운로드\n          </button>\n          <button id="download-results" class="button secondary-btn contrast-only-btn">\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>\n              <polyline points="7 10 12 15 17 10"></polyline>\n              <line x1="12" y1="15" x2="12" y2="3"></line>\n            </svg>\n            보고서 다운로드\n          </button>\n        </div>\n        <div class="right-buttons">\n          <button class="button primary-btn" id="run-full-scan">\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n              <path d="M23 4v6h-6"></path>\n              <path d="M1 20v-6h6"></path>\n              <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>\n            </svg>\n            검사 새로고침\n          </button>\n        </div>\n      </div>\n    ',document.body.appendChild(s),function(){var n,t,e,o,a=s.querySelector(".panel-header"),r=!1,i=50,l=50;function c(n,t){var e=s.offsetWidth,o=(s.offsetHeight,a.offsetHeight);n<0&&(n=0),n>window.innerWidth-e&&(n=window.innerWidth-e),t<0&&(t=0),t>window.innerHeight-o&&(t=window.innerHeight-o),i=n,l=t,s.style.left=n+"px",s.style.top=t+"px"}s.style.position="fixed",s.style.left="50px",s.style.top="50px",a.addEventListener("mousedown",(function(n){n.target.closest(".panel-btn")||(e=n.clientX-i,o=n.clientY-l,(n.target===a||n.target.closest(".panel-header"))&&(r=!0),n.preventDefault())})),document.addEventListener("mousemove",(function(a){r&&(a.preventDefault(),n=a.clientX-e,t=a.clientY-o,c(n,t))})),document.addEventListener("mouseup",(function(){e=n,o=t,r=!1})),window.addEventListener("resize",(function(){c(i,l)}))}();var d=!1;function p(n){var t;document.querySelectorAll(".tab-content").forEach((function(n){n.style.display="none"})),document.querySelectorAll(".panel-tabs button").forEach((function(n){n.classList.remove("tab-active")})),document.getElementById("tab-"+n).classList.add("tab-active"),document.getElementById("tab-content-"+n).style.display="block","contrast"!==n||document.getElementById("tab-content-contrast").innerHTML.includes("contrast-summary")||u(),"wcag"!==n||document.getElementById("tab-content-wcag").innerHTML.includes("category-header")||h(),"udl"!==n||document.getElementById("tab-content-udl").innerHTML.includes("udl-category")||x(),"colorblind"!==n||document.getElementById("tab-content-colorblind").innerHTML.includes("colorblind-tester")||((t=document.getElementById("tab-content-colorblind")).innerHTML='<div class="loading">색맹 검사 도구 로딩 중...</div>',setTimeout((function(){t.innerHTML='\n          <div class="colorblind-tester">\n            <div class="contrast-summary">\n              <h3>색맹 시뮬레이션 도구</h3>\n              <p>웹 페이지의 색상이 색맹 사용자에게 어떻게 보이는지 시뮬레이션합니다.</p>\n              <p>아래에서 시뮬레이션할 색맹 유형을 선택하세요:</p>\n            </div>\n            \n            <div class="colorblind-controls">\n              <div class="control-group">\n                <label for="colorblind-type">색맹 유형</label>\n                <select id="colorblind-type" class="select-control">\n                  <option value="normal">일반 시력</option>\n                  <option value="protanopia">적색맹 (Protanopia)</option>\n                  <option value="deuteranopia">녹색맹 (Deuteranopia)</option>\n                  <option value="tritanopia">청색맹 (Tritanopia)</option>\n                  <option value="achromatopsia">완전색맹 (Achromatopsia)</option>\n                </select>\n              </div>\n              \n              <div class="control-group">\n                <label for="colorblind-strength">강도</label>\n                <input type="range" id="colorblind-strength" min="0" max="100" value="100" class="range-control">\n                <span id="strength-value">100%</span>\n              </div>\n            </div>\n            \n            <div class="colorblind-preview">\n              <div class="preview-container">\n                <h4>원본 색상</h4>\n                <div class="color-samples original-samples">\n                  <div class="color-sample" style="background-color: #E53935;">#E53935 (빨강)</div>\n                  <div class="color-sample" style="background-color: #43A047;">#43A047 (녹색)</div>\n                  <div class="color-sample" style="background-color: #1E88E5;">#1E88E5 (파랑)</div>\n                  <div class="color-sample" style="background-color: #FDD835;">#FDD835 (노랑)</div>\n                  <div class="color-sample" style="background-color: #8E24AA;">#8E24AA (보라)</div>\n                  <div class="color-sample" style="background-color: #00ACC1;">#00ACC1 (청록)</div>\n                  <div class="color-sample" style="background-color: #FF9800;">#FF9800 (주황)</div>\n                  <div class="color-sample" style="background-color: #6D4C41;">#6D4C41 (갈색)</div>\n                </div>\n              </div>\n              \n              <div class="preview-container">\n                <h4>시뮬레이션 결과</h4>\n                <div class="color-samples" id="colorblind-samples">\n                </div>\n              </div>\n            </div>\n            \n            <div class="colorblind-upload">\n              <h4>이미지 색맹 시뮬레이션</h4>\n              <p>이미지를 업로드하여 색맹 시뮬레이션을 확인할 수 있습니다:</p>\n              <input type="file" id="image-upload" accept="image/*" class="file-input">\n              <div class="image-preview-container">\n                <div class="image-preview">\n                  <div class="preview-original">\n                    <h5>원본 이미지</h5>\n                    <div id="original-image-preview"></div>\n                  </div>\n                  <div class="preview-simulation">\n                    <h5>시뮬레이션 결과</h5>\n                    <canvas id="simulation-canvas"></canvas>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            <div class="colorblind-info">\n              <h4>색맹에 대한 안내</h4>\n              <ul>\n                <li><strong>적색맹 (Protanopia):</strong> 적색 수용체의 기능이 약하거나 없어 빨강색을 식별하기 어렵습니다.</li>\n                <li><strong>녹색맹 (Deuteranopia):</strong> 녹색 수용체의 기능이 약하거나 없어 녹색을 식별하기 어렵습니다.</li>\n                <li><strong>청색맹 (Tritanopia):</strong> 청색 수용체의 기능이 약하거나 없어 파랑색을 식별하기 어렵습니다.</li>\n                <li><strong>완전색맹 (Achromatopsia):</strong> 모든 색상을 흑백으로만 인식합니다.</li>\n              </ul>\n              <h4>접근성 높은 디자인을 위한 팁</h4>\n              <ul>\n                <li>색상만으로 정보를 구분하지 말고 항상 텍스트나 아이콘, 패턴 등의 부가적인 방법을 함께 사용하세요.</li>\n                <li>색상 대비를 높게 유지하고, 특히 빨강/녹색 조합은 피하세요.</li>\n                <li>사용자가 색상을 개인화할 수 있는 옵션을 제공하세요.</li>\n                <li>중요한 UI 요소에는 색상 외에도 형태, 크기, 위치 등으로 차별화하세요.</li>\n              </ul>\n            </div>\n          </div>\n          \n          <style>\n            .colorblind-tester {\n              padding: 0 0 20px 0;\n            }\n            \n            .colorblind-controls {\n              display: flex;\n              flex-wrap: wrap;\n              gap: 16px;\n              margin-bottom: 24px;\n            }\n            \n            .control-group {\n              flex: 1;\n              min-width: 200px;\n            }\n            \n            .select-control {\n              width: 100%;\n              padding: 8px;\n              border-radius: 4px;\n              border: 1px solid #ced4da;\n              margin-top: 4px;\n            }\n            \n            .range-control {\n              width: 100%;\n              margin-top: 4px;\n            }\n            \n            .colorblind-preview {\n              display: flex;\n              flex-wrap: wrap;\n              gap: 20px;\n              margin-bottom: 24px;\n            }\n            \n            .preview-container {\n              flex: 1;\n              min-width: 250px;\n            }\n            \n            .color-samples {\n              display: grid;\n              grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n              gap: 12px;\n            }\n            \n            .color-sample {\n              padding: 12px;\n              border-radius: 4px;\n              color: white;\n              text-shadow: 0 0 2px rgba(0,0,0,0.7);\n              font-size: 12px;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              text-align: center;\n              height: 60px;\n            }\n            \n            .colorblind-upload {\n              margin-bottom: 24px;\n            }\n            \n            .file-input {\n              margin: 10px 0;\n            }\n            \n            .image-preview-container {\n              margin-top: 16px;\n            }\n            \n            .image-preview {\n              display: flex;\n              flex-wrap: wrap;\n              gap: 20px;\n            }\n            \n            .preview-original, .preview-simulation {\n              flex: 1;\n              min-width: 250px;\n            }\n            \n            #original-image-preview img, #simulation-canvas {\n              max-width: 100%;\n              border: 1px solid #ced4da;\n              border-radius: 4px;\n            }\n            \n            .colorblind-info {\n              background-color: #f8f9fa;\n              padding: 16px;\n              border-radius: 8px;\n              border: 1px solid #e9ecef;\n            }\n            \n            .colorblind-info h4 {\n              margin-top: 0;\n              margin-bottom: 12px;\n              color: #343a40;\n            }\n            \n            .colorblind-info ul {\n              margin-bottom: 20px;\n            }\n            \n            .colorblind-info li {\n              margin-bottom: 8px;\n              color: #495057;\n            }\n          </style>\n        ',function(){var n=document.getElementById("colorblind-type"),t=document.getElementById("colorblind-strength"),e=document.getElementById("strength-value"),o=document.getElementById("colorblind-samples"),a=document.getElementById("image-upload"),r=document.getElementById("original-image-preview"),i=document.getElementById("simulation-canvas"),l=[{hex:"#E53935",name:"빨강"},{hex:"#43A047",name:"녹색"},{hex:"#1E88E5",name:"파랑"},{hex:"#FDD835",name:"노랑"},{hex:"#8E24AA",name:"보라"},{hex:"#00ACC1",name:"청록"},{hex:"#FF9800",name:"주황"},{hex:"#6D4C41",name:"갈색"}],c={normal:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],protanopia:[.567,.433,0,0,0,.558,.442,0,0,0,0,.242,.758,0,0,0,0,0,1,0],deuteranopia:[.625,.375,0,0,0,.7,.3,0,0,0,0,.3,.7,0,0,0,0,0,1,0],tritanopia:[.95,.05,0,0,0,0,.433,.567,0,0,0,.475,.525,0,0,0,0,0,1,0],achromatopsia:[.299,.587,.114,0,0,.299,.587,.114,0,0,.299,.587,.114,0,0,0,0,0,1,0]};function s(){var e=n.value,a=parseFloat(t.value)/100;o.innerHTML="",l.forEach((function(n){var t=document.createElement("div");t.className="color-sample",t.textContent="".concat(n.hex," (").concat(n.name,")");var r=function(n,t,e){var o=p(n),a=c[t];if(!a)return n;for(var r=[],i=0;i<c.normal.length;i++)r[i]=c.normal[i]*(1-e)+a[i]*e;var l=o.r*r[0]+o.g*r[1]+o.b*r[2],s=o.r*r[5]+o.g*r[6]+o.b*r[7],d=o.r*r[10]+o.g*r[11]+o.b*r[12];return g(Math.round(l),Math.round(s),Math.round(d))}(n.hex,e,a);t.style.backgroundColor=r;var i=p(r),l=(299*i.r+587*i.g+114*i.b)/1e3;t.style.color=l>125?"black":"white",t.style.textShadow=l>125?"0 0 2px rgba(255,255,255,0.7)":"0 0 2px rgba(0,0,0,0.7)",o.appendChild(t)}));var i=r.querySelector("img");i&&d(i)}function d(e){var o=n.value,a=parseFloat(t.value)/100,r=i,l=r.getContext("2d");if(r.width=e.width,r.height=e.height,l.drawImage(e,0,0,e.width,e.height),"normal"!==o){for(var s=l.getImageData(0,0,r.width,r.height),d=s.data,p=c[o],u=[],g=0;g<c.normal.length;g++)u[g]=c.normal[g]*(1-a)+p[g]*a;for(var m=0;m<d.length;m+=4){var b=d[m],f=d[m+1],h=d[m+2];d[m]=b*u[0]+f*u[1]+h*u[2],d[m+1]=b*u[5]+f*u[6]+h*u[7],d[m+2]=b*u[10]+f*u[11]+h*u[12]}l.putImageData(s,0,0)}}function p(n){n=n.replace(/^#/,"");var t=parseInt(n,16);return{r:t>>16&255,g:t>>8&255,b:255&t}}s(),n.addEventListener("change",s),t.addEventListener("input",(function(){e.textContent=this.value+"%",s()})),a.addEventListener("change",(function(n){if(n.target.files&&n.target.files[0]){var t=new FileReader;t.onload=function(n){var t=new Image;t.onload=function(){r.innerHTML="",r.appendChild(t.cloneNode()),d(t)},t.src=n.target.result},t.readAsDataURL(n.target.files[0])}}))}()}),500)),"chat"===n&&function(){if(document.querySelector(".chat-messages")){var n=document.getElementById("chat-input-field"),t=document.getElementById("chat-send-btn"),e=document.querySelector(".chat-messages"),o=document.getElementById("reset-chat-btn");if(console.log("채팅 초기화:",{chatInput:n,chatSendBtn:t,chatMessages:e,resetChatBtn:o}),document.querySelectorAll(".tab-link").forEach((function(n){n.addEventListener("click",(function(){"tab-content-chat"===n.getAttribute("data-tab")&&setTimeout((function(){return L(e)}),100)}))})),n&&t&&0===e.children.length){window.chatHistory=[],E("안녕하세요! UDL 및 웹 접근성 관련 질문이 있으시면 편하게 물어보세요.");var a=document.getElementById("download-chat-btn");a&&a.addEventListener("click",w),o&&o.addEventListener("click",y),t.addEventListener("click",(function(){console.log("전송 버튼 클릭됨"),k()})),n.addEventListener("keydown",(function(n){"Enter"===n.key&&(console.log("엔터키 입력됨"),k())})),e.addEventListener("DOMNodeInserted",(function(){setTimeout((function(){return L(e)}),10)})),new MutationObserver((function(){setTimeout((function(){return L(e)}),10)})).observe(e,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),setTimeout((function(){return L(e)}),100),setTimeout((function(){return L(e)}),500),setTimeout((function(){return L(e)}),1e3);window.addEventListener("resize",(function(){e.style.display="none",e.offsetHeight,e.style.display="flex",L(e)})),e.addEventListener("click",(function(){return L(e)})),console.log("채팅 이벤트 설정 완료")}else e.children.length>0&&L(e)}}(),document.querySelectorAll(".contrast-only-btn, .chat-control-btn").forEach((function(n){n.style.display="none"})),"contrast"===n?document.querySelectorAll(".contrast-only-btn").forEach((function(n){n.style.display="inline-flex"})):"chat"===n&&document.querySelectorAll(".chat-control-btn").forEach((function(n){n.style.display="inline-flex"}))}function u(){document.getElementById("tab-content-contrast").innerHTML='<div class="loading">색상 대비 검사 중...</div>',setTimeout((function(){!function(n){var t=document.getElementById("tab-content-contrast");t.innerHTML="";var e=n.filter((function(n){return!n.aa})),o=n.filter((function(n){return n.aa})),a=n.length,r=a?Math.round(o.length/a*100):0,i=document.createElement("div");i.className="contrast-guide",i.innerHTML='\n        <div class="contrast-guide-header">\n          <h3>색상 대비 평가 기준 <span class="info-icon" id="contrast-info-icon">ⓘ</span></h3>\n          <div class="contrast-tooltip" id="contrast-tooltip">\n            <div class="tooltip-content">\n              <div class="tooltip-header">텍스트 콘텐츠의 명도 대비 기준</div>\n              <div class="tooltip-item"><span class="tooltip-label">일반 텍스트:</span> 명도 대비 <strong>4.5:1</strong> 이상</div>\n              <div class="tooltip-item"><span class="tooltip-label">큰 텍스트(18pt 이상 또는 14pt 이상 굵은 글꼴):</span> 명도 대비 <strong>3:1</strong> 이상</div>\n              <div class="tooltip-item"><span class="tooltip-label">화면 확대 가능 콘텐츠:</span> 명도 대비 <strong>3:1</strong> 이상</div>\n              <div class="tooltip-item"><span class="tooltip-label">예외:</span> 로고, 장식 목적의 콘텐츠, 마우스/키보드 포커스 시 명도 대비가 커지는 콘텐츠 등</div>\n            </div>\n          </div>\n        </div>\n      ',t.appendChild(i),setTimeout((function(){var n=document.getElementById("contrast-info-icon"),t=document.getElementById("contrast-tooltip");n&&t&&(n.addEventListener("mouseenter",(function(){t.style.display="block"})),n.addEventListener("mouseleave",(function(){t.style.display="none"})),n.addEventListener("focus",(function(){t.style.display="block"})),n.addEventListener("blur",(function(){t.style.display="none"})),n.tabIndex=0,n.setAttribute("role","button"),n.setAttribute("aria-label","색상 대비 평가 기준 정보"))}),100);var l=document.createElement("div");l.className="contrast-summary",l.innerHTML='\n        <div class="contrast-summary-content">\n          <div class="summary-stats">\n            <div class="stats-row">\n              <span>검사된 요소: <strong>'.concat(a,'개</strong></span>\n              <span class="pass-stat"><span class="dot pass-dot"></span> 통과: <strong>').concat(o.length,"개</strong> (").concat(r,'%)</span>\n              <span class="fail-stat"><span class="dot fail-dot"></span> 실패: <strong>').concat(e.length,"개</strong> (").concat(100-r,'%)</span>\n            </div>\n          </div>\n          <div class="progress-container">\n            <div class="progress-bar">\n              <div class="progress-bar-fill" style="width:').concat(r,'%"></div>\n            </div>\n          </div>\n        </div>\n      '),t.appendChild(l);var c=document.createElement("div");c.className="contrast-tabs",c.innerHTML='\n        <div class="contrast-tab-header">\n          <div class="contrast-tab-header-content">\n            <div class="tab-buttons">\n              <button id="tab-fail" class="contrast-tab-btn active" data-tab="fail">\n                <span class="tab-icon fail-icon">⚠</span> 부적합 항목 ('.concat(e.length,')\n              </button>\n              <button id="tab-pass" class="contrast-tab-btn" data-tab="pass">\n                <span class="tab-icon pass-icon">✓</span> 적합 항목 (').concat(o.length,')\n              </button>\n              <button id="tab-manual" class="contrast-tab-btn" data-tab="manual">\n                <span class="tab-icon manual-icon">⚙</span> 수동 검사\n              </button>\n            </div>\n          </div>\n        </div>\n        <div id="contrast-tab-content" class="contrast-tab-content">\n          <div id="contrast-tab-fail" class="contrast-tab-pane active"></div>\n          <div id="contrast-tab-pass" class="contrast-tab-pane"></div>\n          <div id="contrast-tab-manual" class="contrast-tab-pane"></div>\n        </div>\n      '),t.appendChild(c),setTimeout((function(){var n=document.querySelectorAll(".contrast-tab-btn");n.forEach((function(t){t.addEventListener("click",(function(){n.forEach((function(n){return n.classList.remove("active")})),document.querySelectorAll(".contrast-tab-pane").forEach((function(n){return n.classList.remove("active")})),t.classList.add("active");var e=t.getAttribute("data-tab");document.getElementById("contrast-tab-".concat(e)).classList.add("active")}))}));var t=document.createElement("div");t.className="manual-color-picker-tool",t.innerHTML='\n          <div class="color-picker-info">\n            <span class="info-text">웹 페이지에서 추출하기 어려운 색상이나 그라디언트, 이미지 등의 배경 위 텍스트 색상 대비를 수동으로 확인할 수 있습니다.</span>\n          </div>\n          <div class="color-picker-container">\n            <div class="color-picker-row">\n              <div class="color-input-group">\n                <label for="text-color-picker">텍스트 색상:</label>\n                <button id="text-color-button" class="color-button">\n                  <span class="color-preview-btn" style="background-color:#000000"></span>\n                  <input type="color" id="text-color-picker" value="#000000">\n                </button>\n                <input type="text" id="text-color-hex" value="#000000" placeholder="#000000">\n              </div>\n              <div class="color-input-group">\n                <label for="bg-color-picker">배경 색상:</label>\n                <button id="bg-color-button" class="color-button">\n                  <span class="color-preview-btn" style="background-color:#FFFFFF"></span>\n                  <input type="color" id="bg-color-picker" value="#FFFFFF">\n                </button>\n                <input type="text" id="bg-color-hex" value="#FFFFFF" placeholder="#FFFFFF">\n              </div>\n            </div>\n            <div class="color-preview-area">\n              <div id="manual-color-sample" class="manual-color-sample" style="color: #000000; background-color: #FFFFFF;">\n                샘플 텍스트\n              </div>\n              <div class="manual-contrast-result">\n                <div class="contrast-result-text">대비율: <strong id="manual-contrast-ratio">21.00:1</strong> - <span id="manual-contrast-status" class="manual-contrast-status pass">WCAG AA/AAA 통과</span></div>\n              </div>\n            </div>\n          </div>\n        ',document.getElementById("contrast-tab-manual").appendChild(t);var e=document.getElementById("text-color-picker"),o=document.getElementById("text-color-hex"),a=document.getElementById("bg-color-picker"),r=document.getElementById("bg-color-hex"),i=document.getElementById("manual-color-sample"),l=document.getElementById("manual-contrast-ratio"),c=document.getElementById("manual-contrast-status"),s=document.getElementById("text-color-button"),d=document.getElementById("bg-color-button");function p(){try{var n=f(m(e.value),m(a.value));i.style.color=e.value,i.style.backgroundColor=a.value,document.querySelector("#text-color-button .color-preview-btn").style.backgroundColor=e.value,document.querySelector("#bg-color-button .color-preview-btn").style.backgroundColor=a.value,l.textContent="".concat(n.toFixed(2),":1"),n>=7?(c.className="manual-contrast-status pass",c.textContent="WCAG AA/AAA 통과"):n>=4.5?(c.className="manual-contrast-status pass",c.textContent="WCAG AA 통과 (AAA 실패)"):n>=3?(c.className="manual-contrast-status partial",c.textContent="큰 텍스트만 WCAG AA 통과"):(c.className="manual-contrast-status fail",c.textContent="WCAG 기준 실패")}catch(n){console.error("대비율 계산 오류:",n)}}s.addEventListener("click",(function(){e.click()})),d.addEventListener("click",(function(){a.click()})),e.addEventListener("input",(function(){o.value=e.value.toUpperCase(),p()})),o.addEventListener("input",(function(){/^#[0-9A-F]{6}$/i.test(o.value)&&(e.value=o.value,p())})),a.addEventListener("input",(function(){r.value=a.value.toUpperCase(),p()})),r.addEventListener("input",(function(){/^#[0-9A-F]{6}$/i.test(r.value)&&(a.value=r.value,p())})),p()}),100);var s=document.getElementById("contrast-tab-fail");if(e.length){var d=document.createElement("div");d.className="contrast-items",e.forEach((function(n){var t=document.createElement("div");t.className="contrast-item contrast-fail";var e=n.fs>=18||n.fs>=14&&parseInt(n.fw)>=700?"큰 텍스트 (3:1)":"일반 텍스트 (4.5:1)";t.innerHTML='\n            <div class="item-header">\n              <span class="label label-fail">실패</span>\n              <span class="item-text">"'.concat(n.text,'"</span>\n            </div>\n            <div class="item-details">\n              <div class="contrast-info-row">\n                <div class="color-sample-box" style="color: ').concat(n.textColorHex,"; background-color: ").concat(n.bgColorHex,'">Abc</div>\n                <div class="contrast-ratio">\n                  <div class="ratio-value low-ratio">').concat(e," - 대비율: <strong>").concat(n.contrast.toFixed(2),':1</strong></div>\n                  <div class="color-info">\n                    <span class="color-chip">\n                      <span class="color-preview" style="background-color:').concat(n.textColorHex,'"></span>\n                      <span class="color-code">').concat(n.textColorHex,'</span>\n                    </span>\n                    <span class="color-chip">\n                      <span class="color-preview" style="background-color:').concat(n.bgColorHex,'"></span>\n                      <span class="color-code">').concat(n.bgColorHex,'</span>\n                    </span>\n                  </div>\n                </div>\n              </div>\n              <div class="element-code-preview">\n                <button class="code-toggle">코드 보기</button>\n                <div class="code-content">\n                  <code class="element-html">텍스트 요소: ').concat(g(n.elementHTML),"</code>\n                  ").concat(n.bgElementHTML?'<code class="bg-element-html">배경 요소: '.concat(g(n.bgElementHTML),"</code>"):"","\n                </div>\n              </div>\n            </div>\n          "),t.onclick=function(t){if(t.target.classList.contains("code-toggle")||t.target.closest(".code-toggle")){var e=t.target.classList.contains("code-toggle")?t.target:t.target.closest(".code-toggle"),o=e.nextElementSibling;return o.classList.toggle("show"),e.classList.toggle("active"),e.textContent=o.classList.contains("show")?"코드 접기":"코드 보기",void t.stopPropagation()}t.target.closest(".code-content")?t.stopPropagation():(C(),n.el.classList.add("item-highlight"),n.el.scrollIntoView({behavior:"smooth",block:"center"}))},d.appendChild(t)})),s.appendChild(d)}else s.innerHTML='<div class="empty-message">부적합 항목이 없습니다.</div>';var p=document.getElementById("contrast-tab-pass");if(o.length){var u=document.createElement("div");u.className="contrast-items",o.forEach((function(n){var t=document.createElement("div");t.className="contrast-item contrast-pass";var e=[];n.aa&&e.push('<span class="label label-aa" title="WCAG 2.0 AA 기준 통과">AA</span>'),n.aaa&&e.push('<span class="label label-aaa" title="WCAG 2.0 AAA 기준 통과">AAA</span>');var o=n.fs>=18||n.fs>=14&&parseInt(n.fw)>=700?"큰 텍스트 (3:1)":"일반 텍스트 (4.5:1)";t.innerHTML='\n            <div class="item-header">\n              '.concat(e.join(" "),'\n              <span class="item-text">"').concat(n.text,'"</span>\n            </div>\n            <div class="item-details">\n              <div class="contrast-info-row">\n                <div class="color-sample-box" style="color: ').concat(n.textColorHex,"; background-color: ").concat(n.bgColorHex,'">Abc</div>\n                <div class="contrast-ratio">\n                  <div class="ratio-value high-ratio">').concat(o," - 대비율: <strong>").concat(n.contrast.toFixed(2),':1</strong></div>\n                  <div class="color-info">\n                    <span class="color-chip">\n                      <span class="color-preview" style="background-color:').concat(n.textColorHex,'"></span>\n                      <span class="color-code">').concat(n.textColorHex,'</span>\n                    </span>\n                    <span class="color-chip">\n                      <span class="color-preview" style="background-color:').concat(n.bgColorHex,'"></span>\n                      <span class="color-code">').concat(n.bgColorHex,'</span>\n                    </span>\n                  </div>\n                </div>\n              </div>\n              <div class="element-code-preview">\n                <button class="code-toggle">코드 보기</button>\n                <div class="code-content">\n                  <code class="element-html">텍스트 요소: ').concat(g(n.elementHTML),"</code>\n                  ").concat(n.bgElementHTML?'<code class="bg-element-html">배경 요소: '.concat(g(n.bgElementHTML),"</code>"):"","\n                </div>\n              </div>\n            </div>\n          "),t.onclick=function(t){if(t.target.classList.contains("code-toggle")||t.target.closest(".code-toggle")){var e=t.target.classList.contains("code-toggle")?t.target:t.target.closest(".code-toggle"),o=e.nextElementSibling;return o.classList.toggle("show"),e.classList.toggle("active"),e.textContent=o.classList.contains("show")?"코드 접기":"코드 보기",void t.stopPropagation()}t.target.closest(".code-content")?t.stopPropagation():(C(),n.el.classList.add("item-highlight"),n.el.scrollIntoView({behavior:"smooth",block:"center"}))},u.appendChild(t)})),p.appendChild(u)}else p.innerHTML='<div class="empty-message">적합 항목이 없습니다.</div>';function g(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var b=document.createElement("style");b.textContent='\n        .contrast-guide {\n          background-color: #f8f9fa;\n          border-radius: 8px;\n          padding: 10px;\n          margin: 0 12px 12px 12px;\n          border-left: 3px solid #4285f4;\n        }\n        \n        .contrast-guide-header {\n          display: flex;\n          align-items: center;\n          position: relative;\n        }\n        \n        .contrast-guide-header h3 {\n          margin: 0;\n          font-size: 14px;\n          display: flex;\n          align-items: center;\n        }\n        \n        .info-icon {\n          display: inline-flex;\n          align-items: center;\n          justify-content: center;\n          width: 18px;\n          height: 18px;\n          border-radius: 50%;\n          background: #4285f4;\n          color: white;\n          font-size: 11px;\n          margin-left: 6px;\n          cursor: pointer;\n        }\n        \n        .contrast-tooltip {\n          display: none;\n          position: absolute;\n          top: 100%;\n          left: 0;\n          background: white;\n          border: 1px solid #ddd;\n          box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n          border-radius: 6px;\n          padding: 10px;\n          z-index: 1000;\n          width: 300px;\n          margin-top: 8px;\n        }\n        \n        .tooltip-content h4 {\n          margin-top: 0;\n          margin-bottom: 8px;\n          font-size: 14px;\n        }\n        \n        .tooltip-content p {\n          margin: 6px 0;\n          font-size: 13px;\n          line-height: 1.4;\n        }\n        \n        /* 요약 정보 간소화 */\n        .contrast-summary {\n          background-color: white;\n          border-radius: 8px;\n          padding: 10px;\n          margin: 0 12px 12px 12px;\n          box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n        }\n        \n        .contrast-summary-content {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n        \n        .summary-stats {\n          font-size: 13px;\n        }\n        \n        .summary-stats p {\n          margin: 0;\n        }\n        \n        .progress-container {\n          width: 100%;\n        }\n        \n        .dot {\n          display: inline-block;\n          width: 8px;\n          height: 8px;\n          border-radius: 50%;\n          margin-right: 4px;\n        }\n        \n        .pass-dot {\n          background-color: #34a853;\n        }\n        \n        .fail-dot {\n          background-color: #ea4335;\n        }\n        \n        .pass-stat {\n          color: #34a853;\n        }\n        \n        .fail-stat {\n          color: #ea4335;\n        }\n        \n        .progress-bar {\n          height: 6px;\n          background-color: #f2f2f2;\n          border-radius: 4px;\n          overflow: hidden;\n        }\n        \n        .progress-bar-fill {\n          height: 100%;\n          background-color: #34a853;\n          border-radius: 4px;\n          transition: width 0.5s ease;\n        }\n        \n        /* 탭 스타일 개선 */\n        .contrast-tabs {\n          margin: 0 12px;\n        }\n        \n        .contrast-tab-header {\n          margin-bottom: 10px;\n        }\n        \n        .contrast-tab-header-content {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          width: 100%;\n        }\n        \n        .tab-buttons {\n          display: flex;\n          gap: 4px;\n        }\n        \n        .contrast-tab-btn {\n          padding: 8px 12px;\n          background: none;\n          border: none;\n          border-bottom: 2px solid transparent;\n          cursor: pointer;\n          font-size: 13px;\n          font-weight: 500;\n          display: flex;\n          align-items: center;\n          color: #666;\n          transition: all 0.2s;\n        }\n        \n        .contrast-tab-btn:hover {\n          background-color: #f5f5f5;\n        }\n        \n        .contrast-tab-btn.active {\n          border-bottom-color: #4285f4;\n          color: #4285f4;\n        }\n        \n        .tab-icon {\n          margin-right: 6px;\n        }\n        \n        .fail-icon {\n          color: #ea4335;\n        }\n        \n        .pass-icon {\n          color: #34a853;\n        }\n        \n        .manual-icon {\n          color: #4285f4;\n        }\n        \n        .contrast-tab-pane {\n          display: none;\n        }\n        \n        .contrast-tab-pane.active {\n          display: block;\n        }\n        \n        /* 카드 아이템 스타일 */\n        .contrast-items {\n          display: grid;\n          grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n          gap: 12px;\n          padding-bottom: 16px;\n        }\n        \n        .contrast-item {\n          background: white;\n          border-radius: 8px;\n          box-shadow: 0 1px 3px rgba(0,0,0,0.08);\n          overflow: hidden;\n          border: 1px solid #eee;\n          transition: all 0.2s;\n        }\n        \n        .contrast-item:hover {\n          box-shadow: 0 2px 5px rgba(0,0,0,0.1);\n        }\n        \n        .item-header {\n          padding: 10px;\n          background-color: #f8f9fa;\n          border-bottom: 1px solid #eee;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          font-size: 13px;\n        }\n        \n        .item-text {\n          font-weight: 500;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n        }\n        \n        .item-details {\n          padding: 10px;\n        }\n        \n        .contrast-info-row {\n          display: flex;\n          align-items: flex-start;\n          gap: 10px;\n          margin-bottom: 10px;\n        }\n        \n        .color-sample-box {\n          width: 55px;\n          height: 38px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-weight: 600;\n          border-radius: 6px;\n          border: 1px solid #eee;\n          box-shadow: 0 1px 2px rgba(0,0,0,0.05);\n          flex-shrink: 0;\n          text-align: center;\n        }\n        \n        .contrast-ratio {\n          flex: 1;\n          text-align: left;\n        }\n        \n        .ratio-value {\n          font-size: 13px;\n          margin-bottom: 5px;\n          text-align: left;\n        }\n        \n        .low-ratio {\n          color: #ea4335;\n        }\n        \n        .high-ratio {\n          color: #34a853;\n        }\n        \n        .color-info {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 6px;\n          text-align: left;\n        }\n        \n        .color-chip {\n          display: flex;\n          align-items: center;\n          gap: 5px;\n          padding: 3px 6px;\n          background-color: #f8f9fa;\n          border: 1px solid #eee;\n          border-radius: 4px;\n          font-size: 11px;\n          text-align: left;\n        }\n        \n        .color-preview {\n          width: 14px;\n          height: 14px;\n          border-radius: 3px;\n          border: 1px solid rgba(0,0,0,0.1);\n        }\n        \n        .color-code {\n          font-family: monospace;\n          color: #444;\n          text-align: left;\n        }\n        \n        .element-code-preview {\n          margin-top: 8px;\n          border-top: 1px solid #eee;\n          padding-top: 8px;\n          text-align: left;\n        }\n        \n        .code-toggle {\n          font-size: 12px;\n          color: #4285f4;\n          cursor: pointer;\n          padding: 3px 6px;\n          background: none;\n          border: 1px solid #e0e0e0;\n          border-radius: 4px;\n          display: flex;\n          align-items: center;\n          gap: 3px;\n          margin: 0;\n          text-align: left;\n        }\n        \n        .code-toggle:hover {\n          color: #2b71d9;\n          background-color: #f5f5f5;\n        }\n        \n        .code-toggle::before {\n          content: \'▶\';\n          font-size: 9px;\n          transition: transform 0.2s ease;\n        }\n        \n        .code-toggle.active::before {\n          transform: rotate(90deg);\n        }\n        \n        .code-content {\n          display: none;\n          background-color: #f8f9fa;\n          border-radius: 4px;\n          margin-top: 6px;\n          overflow: hidden;\n        }\n        \n        .code-content.show {\n          display: block;\n        }\n        \n        .element-html, .bg-element-html {\n          display: block;\n          font-family: monospace;\n          font-size: 11px;\n          padding: 8px;\n          overflow-x: auto;\n          white-space: pre-wrap;\n          color: #444;\n          line-height: 1.4;\n          text-align: left;\n        }\n        \n        .bg-element-html {\n          border-top: 1px dashed #ddd;\n          background-color: #f1f3f5;\n        }\n        \n        .label {\n          display: inline-flex;\n          align-items: center;\n          padding: 2px 5px;\n          border-radius: 3px;\n          font-size: 10px;\n          font-weight: 600;\n          line-height: 1;\n        }\n        \n        .label-fail {\n          background-color: #ffebee;\n          color: #d32f2f;\n        }\n        \n        .label-aa {\n          background-color: #e8f5e9;\n          color: #2e7d32;\n        }\n        \n        .label-aaa {\n          background-color: #e3f2fd;\n          color: #1565c0;\n        }\n        \n        .empty-message {\n          text-align: center;\n          padding: 20px;\n          color: #888;\n          font-style: italic;\n          background-color: #f8f9fa;\n          border-radius: 8px;\n          margin-bottom: 16px;\n        }\n        \n        /* 수동 검사 도구 */\n        .manual-color-picker-tool {\n          padding: 16px;\n          background-color: white;\n          border-radius: 8px;\n          box-shadow: 0 1px 3px rgba(0,0,0,0.08);\n          margin-bottom: 16px;\n        }\n        \n        .color-picker-info {\n          margin-bottom: 16px;\n        }\n        \n        .info-text {\n          font-size: 13px;\n          color: #666;\n        }\n        \n        .color-picker-container {\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n        }\n        \n        .color-picker-row {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 16px;\n        }\n        \n        .color-input-group {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n        \n        .color-input-group label {\n          font-size: 13px;\n          font-weight: 500;\n        }\n        \n        .color-button {\n          position: relative;\n          width: 36px;\n          height: 36px;\n          border-radius: 4px;\n          border: 1px solid #ddd;\n          overflow: hidden;\n          padding: 0;\n          cursor: pointer;\n          background: none;\n        }\n        \n        .color-preview-btn {\n          display: block;\n          width: 100%;\n          height: 100%;\n        }\n        \n        input[type="color"] {\n          position: absolute;\n          opacity: 0;\n          width: 0;\n          height: 0;\n        }\n        \n        input[type="text"] {\n          padding: 8px 10px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n          font-family: monospace;\n          font-size: 13px;\n          width: 80px;\n        }\n        \n        .color-preview-area {\n          display: flex;\n          flex-direction: column;\n          gap: 12px;\n        }\n        \n        .manual-color-sample {\n          padding: 16px;\n          text-align: center;\n          font-size: 16px;\n          border-radius: 8px;\n          box-shadow: 0 1px 3px rgba(0,0,0,0.08);\n          border: 1px solid #eee;\n        }\n        \n        .manual-contrast-result {\n          background-color: #f8f9fa;\n          padding: 12px;\n          border-radius: 8px;\n          text-align: center;\n        }\n        \n        .contrast-result-text {\n          font-size: 14px;\n        }\n        \n        .manual-contrast-status {\n          display: inline-block;\n          padding: 4px 8px;\n          border-radius: 4px;\n          font-weight: 600;\n          margin-left: 4px;\n          font-size: 12px;\n        }\n        \n        .manual-contrast-status.pass {\n          background-color: #e8f5e9;\n          color: #2e7d32;\n        }\n        \n        .manual-contrast-status.partial {\n          background-color: #fff8e1;\n          color: #ff8f00;\n        }\n        \n        .manual-contrast-status.fail {\n          background-color: #ffebee;\n          color: #d32f2f;\n        }\n        \n        /* 강조 효과 */\n        .item-highlight {\n          outline: 3px solid #4285f4 !important;\n          outline-offset: 2px !important;\n        }\n      ',t.appendChild(b)}(Array.from(document.querySelectorAll("p, h1, h2, h3, h4, h5, h6, a, span, li, td, th, div, label, button")).filter((function(n){if(n.closest("#udl-accessibility-panel"))return!1;if(!n.textContent.trim())return!1;var t=window.getComputedStyle(n);return"none"!==t.display&&"hidden"!==t.visibility&&"0"!==t.opacity&&null!==n.offsetParent})).map((function(n){var t=window.getComputedStyle(n),e=t.backgroundColor,o=n;if("transparent"===e||"rgba(0, 0, 0, 0)"===e)for(var a=n.parentElement;a;){var r=window.getComputedStyle(a).backgroundColor;if("transparent"!==r&&"rgba(0, 0, 0, 0)"!==r){e=r,o=a;break}a=a.parentElement}"transparent"!==e&&"rgba(0, 0, 0, 0)"!==e||("transparent"!==(e=window.getComputedStyle(document.body).backgroundColor)&&"rgba(0, 0, 0, 0)"!==e||(e="rgb(255, 255, 255)"),o=document.body);var i=m(t.color),l=m(e),c=f(i,l),s=parseFloat(t.fontSize),d=t.fontWeight,p=s>=18||s>=14&&(parseInt(d)>=700||"bold"===d),u=n.outerHTML.split(">")[0]+">",b=o!==n?o.outerHTML.split(">")[0]+">":"";return{el:n,bgElement:o,text:n.textContent.trim().slice(0,30)+(n.textContent.length>30?"...":""),contrast:c,aa:p?c>=3:c>=4.5,aaa:p?c>=4.5:c>=7,fs:s,fw:d,textColor:t.color,textColorHex:g(i.r,i.g,i.b),bgColor:e,bgColorHex:g(l.r,l.g,l.b),elementHTML:u,bgElementHTML:b}})))}),500)}function g(n,t,e){return"#"+((1<<24)+(n<<16)+(t<<8)+e).toString(16).slice(1).toUpperCase()}function m(n){var t=n.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*[\d.]+)?\)/);if(t)return{r:+t[1],g:+t[2],b:+t[3]};if(n.startsWith("#")){var e=n.substring(1);return 3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}}return{r:0,g:0,b:0}}function b(t){var e=t.r,o=t.g,a=t.b,r=n([e,o,a].map((function(n){return(n/=255)<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)})),3);return.2126*(e=r[0])+.7152*(o=r[1])+.0722*r[2]}function f(n,t){var e=b(n),o=b(t);return Math.round((Math.max(e,o)+.05)/(Math.min(e,o)+.05)*100)/100}function h(){var e=document.getElementById("tab-content-wcag");e.innerHTML='<div class="loading">접근성 분석 중...</div>',a().then((function(n){return n.run(document,{resultTypes:["violations","passes","incomplete","inapplicable"],selectors:!0})})).then((function(o){e.innerHTML="";for(var a=function(){var a=n(l[r],2),i=a[0],c=a[1],s=document.createElement("div");s.className="category-section",s.innerHTML="<h3>".concat(c.name,"</h3>"),c.items.forEach((function(n){var e=function(n){switch(n.id){case"1.1.1":var e=Array.from(document.querySelectorAll("img")).filter((function(n){return!n.closest("#udl-accessibility-panel")})),o=e.filter((function(n){return!n.hasAttribute("alt")}));return o.length>0?{status:"fail",message:"대체 텍스트가 없는 이미지 ".concat(o.length,"개 발견"),elements:o}:{status:"pass",message:"모든 이미지(".concat(e.length,"개)에 대체 텍스트 제공됨")};case"1.2.1":var a=Array.from(document.querySelectorAll("video, audio")).filter((function(n){return!n.closest("#udl-accessibility-panel")}));return a.length>0?{status:"review",message:"멀티미디어 콘텐츠 ".concat(a.length,"개 발견. 자막 또는 대체 수단 제공 확인 필요"),elements:a}:{status:"pass",message:"멀티미디어 콘텐츠가 발견되지 않음"};case"1.3.1":var r=Array.from(document.querySelectorAll("table")).filter((function(n){return!n.closest("#udl-accessibility-panel")})),i=r.filter((function(n){return 0===n.querySelectorAll("th").length}));return i.length>0?{status:"fail",message:"제목 셀(th)이 없는 표 ".concat(i.length,"개 발견"),elements:i}:{status:r.length>0?"pass":"review",message:r.length>0?"모든 표(".concat(r.length,"개)에 제목 셀 제공됨"):"표 요소 발견되지 않음"};case"1.3.2":var l=Array.from(document.querySelectorAll("[tabindex]")).filter((function(n){return!n.closest("#udl-accessibility-panel")&&parseInt(n.getAttribute("tabindex"))>0}));return l.length>0?{status:"fail",message:"콘텐츠의 논리적 순서를 방해할 수 있는 양수 tabindex ".concat(l.length,"개 발견"),elements:l}:{status:"pass",message:"논리적 순서에 영향을 주는 요소 발견되지 않음"};case"1.4.3":document.querySelectorAll(".contrast-item");var c=document.querySelectorAll(".contrast-item.contrast-fail");if(c.length>0){var s=Array.from(document.querySelectorAll("p, h1, h2, h3, h4, h5, h6, a, span, li, td, th, div, label, button")).filter((function(n){return!n.closest("#udl-accessibility-panel")&&n.classList.contains("item-highlight")}));return{status:"fail",message:"색상 대비가 부적합한 텍스트 ".concat(c.length,"개 발견"),elements:s.length>0?[s[0]]:[]}}return{status:"pass",message:"모든 텍스트 콘텐츠의 색상 대비가 적합함"};case"2.1.1":var d=Array.from(document.querySelectorAll('a, button, [role="button"], [onclick]')).filter((function(n){return!n.closest("#udl-accessibility-panel")})),p=d.filter((function(n){var t=n.hasAttribute("onclick")||n.onclick,e=n.hasAttribute("onkeydown")||n.onkeydown||n.hasAttribute("onkeyup")||n.onkeyup||n.hasAttribute("onkeypress")||n.onkeypress,o=n.hasAttribute("disabled")||"true"===n.getAttribute("aria-disabled"),a="A"===n.tagName&&(!n.hasAttribute("href")||"#"===n.getAttribute("href"))||"BUTTON"!==n.tagName&&"button"!==n.getAttribute("role")&&t;return!o&&(a||t&&!e)}));return p.length>0?{status:"fail",message:"키보드로 접근이 어려울 수 있는 상호작용 요소 ".concat(p.length,"개 발견"),elements:p}:{status:"pass",message:"모든 상호작용 요소가 키보드로 접근 가능함"};case"2.4.1":var u=Array.from(document.querySelectorAll('a[href^="#"]')).filter((function(n){return!n.closest("#udl-accessibility-panel")&&(n.textContent.toLowerCase().includes("skip")||n.textContent.includes("건너뛰")||n.textContent.includes("바로가기"))}));return 0===u.length?{status:"fail",message:"반복 영역을 건너뛸 수 있는 링크가 발견되지 않음",elements:[]}:{status:"pass",message:"건너뛰기 링크 ".concat(u.length,"개 발견됨")};case"2.4.2":if(!document.title||""===document.title.trim())return{status:"fail",message:"페이지에 제목이 제공되지 않음",elements:[document.querySelector("head > title")||document.querySelector("head")]};var g=Array.from(document.querySelectorAll("iframe, frame")).filter((function(n){return!n.closest("#udl-accessibility-panel")})).filter((function(n){return!n.hasAttribute("title")||""===n.getAttribute("title").trim()}));return g.length>0?{status:"fail",message:"제목이 없는 프레임 ".concat(g.length,"개 발견"),elements:g}:{status:"pass",message:"페이지 및 모든 프레임에 제목이 제공됨"};case"3.3.2":var m=Array.from(document.querySelectorAll("input, textarea, select")).filter((function(n){return!n.closest("#udl-accessibility-panel")&&"hidden"!==n.type&&"button"!==n.type&&"submit"!==n.type&&"reset"!==n.type&&"image"!==n.type})),b=m.filter((function(n){var t=n.getAttribute("id"),e=t&&document.querySelector('label[for="'.concat(t,'"]')),o=n.closest("label"),a=n.hasAttribute("aria-label")&&""!==n.getAttribute("aria-label").trim(),r=n.hasAttribute("aria-labelledby")&&document.getElementById(n.getAttribute("aria-labelledby")),i=n.hasAttribute("title")&&""!==n.getAttribute("title").trim();return!(e||o||a||r||i)}));return b.length>0?{status:"fail",message:"레이블이 없는 입력 필드 ".concat(b.length,"개 발견"),elements:b}:{status:m.length>0?"pass":"review",message:m.length>0?"모든 입력 필드(".concat(m.length,"개)에 레이블 제공됨"):"입력 필드 발견되지 않음"};case"4.1.1":var f=document.querySelector("a a, button button, h1 h1, h2 h2, h3 h3, h4 h4, h5 h5, h6 h6");if(f)return{status:"fail",message:"부적절한 태그 중첩 발견",elements:[f]};var h,x={},v=null,y=function(n){var e="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=t(n))){e&&(n=e);var o=0,a=function(){};return{s:a,n:function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}},e:function(n){throw n},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,l=!1;return{s:function(){e=e.call(n)},n:function(){var n=e.next();return i=n.done,n},e:function(n){l=!0,r=n},f:function(){try{i||null==e.return||e.return()}finally{if(l)throw r}}}}(document.querySelectorAll("[id]"));try{for(y.s();!(h=y.n()).done;){var w=h.value;if(!w.closest("#udl-accessibility-panel")){var k=w.getAttribute("id");if(x[k]){v=w;break}x[k]=!0}}}catch(n){y.e(n)}finally{y.f()}return v?{status:"fail",message:"중복된 ID 값 발견",elements:[v]}:{status:"pass",message:"마크업 오류가 발견되지 않음"};default:return{status:"review",message:"자동 검사가 불가능한 항목입니다. 수동 검토가 필요합니다."}}}(n),a={"1.1.1":["image-alt","input-image-alt","area-alt","svg-img-alt"],"1.2.1":["audio-caption","video-caption"],"1.3.1":["table-fake-caption","td-has-header","th-has-data-cells"],"1.3.2":["logical-tab-order","heading-order"],"1.3.3":["label","input-button-name","form-field-multiple-labels"],"1.4.1":["link-in-text-block","color-contrast"],"1.4.3":["color-contrast"],"2.1.1":["accesskeys","focusable-no-name","area-alt"],"2.4.1":["bypass","region"],"2.4.2":["document-title","frame-title"],"2.4.3":["link-name","button-name"],"3.1.1":["html-lang-valid","html-has-lang"],"3.3.1":["aria-input-field-name","label"],"3.3.2":["label","input-button-name"],"4.1.1":["duplicate-id-active","duplicate-id"],"4.1.2":["aria-roles","aria-valid-attr","aria-required-attr"]}[n.id]||[];if(a.length>0){var r=function(n,t){var e=n.violations.filter((function(n){return t.includes(n.id)})),o=n.incomplete.filter((function(n){return t.includes(n.id)})),a=n.passes.filter((function(n){return t.includes(n.id)}));if(e.length>0){var r=e.sort((function(n,t){var e={critical:4,serious:3,moderate:2,minor:1};return e[t.impact]-e[n.impact]}))[0];return{status:"fail",message:"".concat(r.help," (").concat(r.nodes.length,"개 요소)"),elements:r.nodes.slice(0,3).map((function(n){try{var t=n.target[0];return document.querySelector(t)}catch(n){return null}})).filter(Boolean)}}return o.length>0?{status:"review",message:"수동 검토 필요: ".concat(o[0].help),elements:[]}:a.length>0?{status:"pass",message:"검사 통과 (".concat(a.reduce((function(n,t){return n+t.nodes.length}),0),"개 요소)"),elements:[]}:{status:"inapplicable",message:"해당 없음",elements:[]}}(o,a);"inapplicable"!==r.status&&(e=r)}var l=document.createElement("div");l.className="guideline-item ".concat(e.status),l.setAttribute("data-guideline",n.id),l.setAttribute("data-category",i);var c="";if("pass"===e.status?c="✓ 양호: ":"fail"===e.status?c="✗ 문제점: ":"review"===e.status&&(c="? 검토 필요: "),l.innerHTML="\n                <h4>".concat(n.id," ").concat(n.name,"</h4>\n                <p>").concat(n.desc,"</p>\n                <p>").concat(c).concat(e.message,"</p>\n              "),e.elements&&e.elements.length>0){var d=document.createElement("button");d.className="show-element-btn",d.textContent="위반 요소 보기",d.addEventListener("click",(function(){C(),e.elements.forEach((function(n){try{n.classList.add("item-highlight"),n.scrollIntoView({behavior:"smooth",block:"center"})}catch(n){console.error("요소 강조 표시 오류:",n)}}))})),l.appendChild(d)}s.appendChild(l)})),e.appendChild(s)},r=0,l=Object.entries(i);r<l.length;r++)a()})).catch((function(n){console.error("WCAG 분석 오류:",n),e.innerHTML='<div class="error">접근성 분석 중 오류가 발생했습니다.</div>'}))}function x(){var n,t,e,o,a;document.getElementById("tab-content-udl").innerHTML='<div class="loading">AI 분석 중...</div>',document.documentElement.outerHTML,n=document.title||"Untitled Page",t=document.body.innerText,e=document.getElementById("tab-content-udl"),o="\n        페이지 제목: ".concat(n,"\n        페이지 콘텐츠 요약: ").concat(t.slice(0,1e3),"...\n      ").trim(),a={contents:[{parts:[{text:"웹 페이지를 UDL(보편적 학습 설계) 원칙과 웹 접근성에 따라 분석해주세요. \n             \n다음은 분석할 웹 페이지의 정보입니다:\n".concat(o,"\n\n이 페이지의 접근성을 개선하기 위한 방안을 구체적으로 5-7가지 제안해주세요.\n특히 다음에 초점을 맞춰주세요:\n1. 시각적 접근성 (색상 대비, 텍스트 크기, 레이아웃)\n2. 키보드 접근성\n3. 화면 읽기 프로그램 대응\n4. 명확한 네비게이션 구조\n5. 다양한 사용자를 위한 멀티미디어 대안\n\n현재 페이지에서 개선이 필요한 부분을 지적하고, 어떻게 개선할 수 있는지 실용적인 방법을 제시해주세요.\n마크다운 형식으로 응답해주세요.")}]}]},fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-lite:generateContent?key=".concat(r),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(n){if(!n.ok)throw new Error("HTTP error! status: ".concat(n.status));return n.json()})).then((function(n){loadingDiv=e.querySelector(".loading"),loadingDiv&&loadingDiv.remove();var t=document.createElement("div");t.className="ai-analysis-result";try{var o=n.candidates[0].content.parts[0].text;t.innerHTML='\n            <div class="ai-response">\n              '.concat(v(o),"\n            </div>\n          ")}catch(n){t.innerHTML='\n            <div class="error">\n              <p>AI 응답 처리 중 오류가 발생했습니다: '.concat(n.message,"</p>\n            </div>\n          ")}e.appendChild(t)})).catch((function(n){loadingDiv=e.querySelector(".loading"),loadingDiv&&loadingDiv.remove();var t=document.createElement("div");t.className="error",t.innerHTML="\n          <p>죄송합니다. AI 분석 중 오류가 발생했습니다.</p>\n          <p>오류 내용: ".concat(n.message,"</p>\n          <p>API 엔드포인트: https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-lite:generateContent</p>\n        "),e.appendChild(t)}))}function v(n){var o,a=n.replace(/^### (.*$)/gim,"<h3>$1</h3>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/^# (.*$)/gim,"<h1>$1</h1>").replace(/```([\s\S]*?)```/g,'<pre class="code-block">$1</pre>').replace(/`([^`]+)`/g,'<code class="inline-code">$1</code>').replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>").replace(/\*([^*]+)\*/g,"<em>$1</em>").replace(/^---$/gm,"<hr>").replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>'),r=/^(\s*)[-*+] (.*)$/gm;return(o=a.matchAll(r),function(n){if(Array.isArray(n))return e(n)}(o)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(o)||t(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).length>0&&(a=(a="<ul>"+(a=a.replace(r,"<li>$2</li>"))+"</ul>").replace(/<\/ul>\s*<ul>/g,"")),a=a.replace(/\n\n/g,"</p><p>"),'\n        <div class="ai-analysis-content">\n          <p>'.concat(a,"</p>\n          <style>\n            .ai-analysis-content {\n              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n              line-height: 1.6;\n              color: #333;\n              padding: 16px;\n              background-color: #fff;\n              border-radius: 8px;\n              box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n            }\n            \n            .ai-analysis-content h1, \n            .ai-analysis-content h2, \n            .ai-analysis-content h3 {\n              margin-top: 24px;\n              margin-bottom: 16px;\n              color: #1a73e8;\n              font-weight: 600;\n              line-height: 1.3;\n            }\n            \n            .ai-analysis-content h1 {\n              font-size: 24px;\n              border-bottom: 1px solid #eee;\n              padding-bottom: 8px;\n            }\n            \n            .ai-analysis-content h2 {\n              font-size: 20px;\n            }\n            \n            .ai-analysis-content h3 {\n              font-size: 16px;\n            }\n            \n            .ai-analysis-content p {\n              margin-bottom: 16px;\n            }\n            \n            .ai-analysis-content ul, \n            .ai-analysis-content ol {\n              margin-bottom: 16px;\n              padding-left: 24px;\n            }\n            \n            .ai-analysis-content li {\n              margin-bottom: 8px;\n              list-style-type: disc;\n            }\n            \n            .ai-analysis-content code.inline-code {\n              background-color: #f5f7fa;\n              padding: 2px 4px;\n              border-radius: 4px;\n              font-family: Consolas, Monaco, 'Andale Mono', monospace;\n              font-size: 90%;\n              color: #e53935;\n            }\n            \n            .ai-analysis-content pre.code-block {\n              background-color: #f5f7fa;\n              padding: 16px;\n              border-radius: 4px;\n              overflow-x: auto;\n              font-family: Consolas, Monaco, 'Andale Mono', monospace;\n              font-size: 90%;\n              color: #333;\n              border: 1px solid #eee;\n              margin-bottom: 16px;\n              white-space: pre-wrap;\n            }\n            \n            .ai-analysis-content hr {\n              border: 0;\n              height: 1px;\n              background-color: #eee;\n              margin: 24px 0;\n            }\n            \n            .ai-analysis-content strong {\n              font-weight: 600;\n            }\n            \n            .ai-analysis-content a {\n              color: #1a73e8;\n              text-decoration: none;\n            }\n            \n            .ai-analysis-content a:hover {\n              text-decoration: underline;\n            }\n            \n            .ai-analysis-content em {\n              font-style: italic;\n              color: #555;\n            }\n          </style>\n        </div>\n      ")}function y(){confirm("현재 대화 내용을 지우고 새 대화를 시작하시겠습니까?")&&(window.chatHistory=[],document.querySelector(".chat-messages").innerHTML="",E("안녕하세요! UDL 및 웹 접근성 관련 질문이 있으시면 편하게 물어보세요."))}function w(){if(window.chatHistory&&0!==window.chatHistory.length){var n=window.chatHistory.map((function(n){return"".concat("user"===n.role?"사용자":"AI",": ").concat(n.content)})).join("\n\n"),t=new Date,e="UDL-Chat-".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate(),"-").concat(t.getHours(),"-").concat(t.getMinutes(),".txt"),o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),o.setAttribute("download",e),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}else alert("다운로드할 대화 내용이 없습니다.")}function k(){console.log("sendChatMessage 함수 실행됨");var n=document.getElementById("chat-input-field"),t=document.querySelector(".chat-messages"),e=n.value.trim();if(console.log("사용자 입력:",e),e){if(!["접근성","웹접근성","KWCAG","대체텍스트","키보드","스크린리더","명도","대비","색상","자막","표","구조","레이아웃","마크업","ARIA","지침","인식","이해","운용","콘텐츠","대체","텍스트","이미지","링크","버튼","서식","오류","alt","label","WAI","WCAG","장애","시각","청각","인지","마우스","포커스","네비게이션"].some((function(n){return e.toLowerCase().includes(n.toLowerCase())}))&&e.length>10)return A(e),n.value="",void E("CP님, 죄송합니다만 이 도구는 웹 접근성 관련 질문에 특화되어 있습니다. KWCAG 2.2(한국형 웹 콘텐츠 접근성 지침)에 관한 질문이나 현재 페이지의 접근성 개선 방안에 대해 문의해 주시기 바랍니다.");A(e),n.value="",window.chatHistory||(window.chatHistory=[]),window.chatHistory.push({role:"user",content:e}),window.chatHistory.length>10&&(window.chatHistory=window.chatHistory.slice(window.chatHistory.length-10));var o=document.createElement("div");o.className="loading",t.appendChild(o),L(t),console.log("API 요청 준비 중");var a="\n웹 접근성 전문가로서 아래 질문에 답변해주세요:\n\n페이지 정보: ".concat(document.title," (").concat(window.location.href,")\n\n사용자 질문: ").concat(e,'\n\n웹 접근성 관련 질문에 대해 한국형 웹 콘텐츠 접근성 지침(KWCAG) 2.2를 기준으로 답변해주세요.\n답변 시 다음 형식을 사용하세요:\n\n---\n**[관련 KWCAG 항목]**\n* **오류:**\n* **문제점:**\n* **해결방법:**\n* **코드 예시:** (필요 시)\n---\n\n사용자는 "CP님"으로 호칭하고, 간결하게 답변해주세요.\n      ').trim(),i={contents:[{parts:[{text:a}]}]};console.log("API 요청 시작, 프롬프트 길이:",a.length);var l=setTimeout((function(){console.error("API 호출 타임아웃"),o.remove(),E("\nCP님, 현재 AI 응답 생성에 문제가 발생했습니다. \n\n자동 생성된 접근성 점검 결과는 다음과 같습니다:\n- 키보드 접근성 확인이 필요합니다.\n- 대체 텍스트 제공 여부를 확인해보세요.\n- 색상 대비가 충분한지 확인하세요.\n\n더 자세한 분석을 위해 질문을 간결하게 다시 작성해주시거나, 나중에 다시 시도해보세요.\n        ")}),2e4);window.apiErrorCount||(window.apiErrorCount=0),window.apiErrorCount>2?(clearTimeout(l),o.remove(),E("\nCP님, API 서비스에 일시적인 문제가 발생했습니다.\n나중에 다시 시도해주세요.\n        ")):fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-lite:generateContent?key=".concat(r),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(n){if(clearTimeout(l),!n.ok)throw window.apiErrorCount++,new Error("HTTP error! status: ".concat(n.status));return window.apiErrorCount=0,n.json()})).then((function(n){o.remove(),n.candidates&&n.candidates[0]&&n.candidates[0].content&&n.candidates[0].content.parts&&n.candidates[0].content.parts[0]?E(n.candidates[0].content.parts[0].text):(window.apiErrorCount++,console.error("API 응답 구조 문제:",n),E("죄송합니다. 응답 생성에 문제가 발생했습니다. 다시 시도해주세요."))})).catch((function(n){clearTimeout(l),o.remove(),window.apiErrorCount++,console.error("API 호출 오류:",n),E("죄송합니다. API 서비스 연결에 문제가 발생했습니다.")}))}else console.log("입력이 비어있음, 함수 종료")}function A(n){var t=document.querySelector(".chat-messages"),e=document.createElement("div");e.className="chat-message chat-user",e.textContent=n,t.appendChild(e),L(t),setTimeout((function(){return L(t)}),100),setTimeout((function(){t.scrollHeight-t.clientHeight-t.scrollTop<30||(console.log("사용자 메시지 스크롤 강제 조정"),L(t))}),300)}function E(n){var t=document.querySelector(".chat-messages"),e=document.createElement("div");e.className="chat-message chat-bot",e.innerHTML=v(n),t.scrollHeight,t.clientHeight,t.scrollTop,t.appendChild(e),L(t);var o=e.querySelectorAll("img");o.length>0&&o.forEach((function(n){n.onload=function(){return L(t)}})),setTimeout((function(){return L(t)}),100),setTimeout((function(){return L(t)}),500),setTimeout((function(){return L(t)}),1e3),window.addEventListener("load",(function(){return L(t)})),function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e>10||setTimeout((function(){L(t),t.scrollHeight-t.clientHeight-t.scrollTop<30||n(e+1)}),300*(e+1))}(),window.chatHistory||(window.chatHistory=[]),window.chatHistory.push({role:"bot",content:n}),window.chatHistory.length>10&&(window.chatHistory=window.chatHistory.slice(window.chatHistory.length-10)),t.onscroll=function(){var n=t.scrollHeight-t.clientHeight-t.scrollTop<30;console.log("스크롤 상태:",n?"맨 아래":"스크롤 중")}}function C(){document.querySelectorAll(".item-highlight").forEach((function(n){n.classList.remove("item-highlight")}))}function L(n){if(n||(n=document.querySelector(".chat-messages")))try{n.scrollTop=n.scrollHeight,requestAnimationFrame((function(){n.scrollTop=n.scrollHeight,n.scrollTop+n.clientHeight<n.scrollHeight-20&&(console.log("스크롤 강제 재조정"),n.scrollTop=n.scrollHeight)}))}catch(n){console.error("스크롤 처리 중 오류:",n)}}document.getElementById("minimize-panel").onclick=function(){d=!d,s.querySelectorAll(".tab-content, .panel-tabs, .panel-footer").forEach((function(n){return n.style.display=d?"none":""})),d?(s.style.height="auto",s.style.resize="none"):(s.style.height="calc(90vh)",s.style.resize="both"),document.getElementById("minimize-panel").innerHTML=d?'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="7 13 12 18 17 13"></polyline><polyline points="7 6 12 11 17 6"></polyline></svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>',document.getElementById("minimize-panel").title=d?"확장":"최소화"},document.getElementById("close-panel").onclick=function(){s.remove(),C()},document.getElementById("tab-contrast").onclick=function(){return p("contrast")},document.getElementById("tab-wcag").onclick=function(){return p("wcag")},document.getElementById("tab-udl").onclick=function(){return p("udl")},document.getElementById("tab-colorblind").onclick=function(){return p("colorblind")},document.getElementById("tab-chat").onclick=function(){return p("chat")},document.getElementById("download-results").onclick=function(){return function(){var t=document.title||"Untitled Page",e=(new Date).toLocaleString(),o='\n        <!DOCTYPE html>\n        <html lang="ko">\n        <head>\n          <meta charset="UTF-8">\n          <meta name="viewport" content="width=device-width, initial-scale=1.0">\n          <title>'.concat(t," - 웹 접근성 및 UDL 분석 보고서</title>\n          <style>\n            body { font-family: Arial, sans-serif; line-height: 1.6; margin: 0; padding: 20px; color: #333; }\n            header { margin-bottom: 30px; }\n            h1 { color: #2c5282; }\n            h2 { color: #3a7bd5; margin-top: 30px; border-bottom: 1px solid #e9ecef; padding-bottom: 10px; }\n            h3 { margin-top: 20px; }\n            .report-section { margin-bottom: 20px; }\n            .summary-box { background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px; }\n            .fail-item { background: rgba(250, 82, 82, 0.05); padding: 10px; margin: 10px 0; border-left: 3px solid #fa5252; }\n            .pass-item { background: rgba(64, 192, 87, 0.05); padding: 10px; margin: 10px 0; border-left: 3px solid #40c057; }\n            footer { margin-top: 50px; font-size: 12px; color: #6c757d; }\n          </style>\n        </head>\n        <body>\n          <header>\n            <h1>").concat(t," - 색상 대비 분석 보고서</h1>\n            <p>생성일시: ").concat(e,"</p>\n            <p>URL: ").concat(window.location.href,'</p>\n          </header>\n          \n          <div class="report-section">\n            <h2>요약</h2>\n            <div class="summary-box">\n              <p>이 보고서는 WCAG 2.2 지침의 색상 대비 요구사항에 따라 웹 페이지를 분석한 결과입니다.</p>\n      '),a=document.querySelectorAll(".contrast-item.contrast-fail").length,r=document.querySelectorAll(".contrast-item").length,c=r?Math.round((r-a)/r*100):0;o+="\n            <p><strong>색상 대비:</strong> ".concat(r,"개 중 ").concat(r-a,"개 통과 (").concat(c,'%)</p>\n            </div>\n          </div>\n          \n          <div class="report-section">\n            <h2>색상 대비 분석</h2>\n      '),a>0&&(o+="<h3>색상 대비 부적합 항목 (".concat(a,"개)</h3>"),document.querySelectorAll(".contrast-item.contrast-fail").forEach((function(n){var t=n.querySelector(".item-text").textContent,e=n.querySelector(".ratio-value strong"),a=e?e.textContent.replace(":1",""):"?",r=n.querySelector(".color-chip:first-child .color-code"),i=n.querySelector(".color-chip:last-child .color-code"),l=r?r.textContent:"#000000",c=i?i.textContent:"#FFFFFF";o+='\n            <div class="fail-item">\n              <p>텍스트: "'.concat(t,'"</p>\n              <p>대비율: ').concat(a,":1</p>\n              <p>텍스트 색상: ").concat(l,", 배경 색상: ").concat(c,"</p>\n            </div>\n          ")})));var s=r-a;s>0&&(o+="<h3>색상 대비 적합 항목 (".concat(s,"개)</h3>"),document.querySelectorAll(".contrast-item.contrast-pass").forEach((function(n){var t=n.querySelector(".item-text").textContent,e=n.querySelector(".ratio-value strong"),a=e?e.textContent.replace(":1",""):"?",r=n.querySelector(".color-chip:first-child .color-code"),i=n.querySelector(".color-chip:last-child .color-code"),l=r?r.textContent:"#000000",c=i?i.textContent:"#FFFFFF";o+='\n            <div class="pass-item">\n              <p>텍스트: "'.concat(t,'"</p>\n              <p>대비율: ').concat(a,":1</p>\n              <p>텍스트 색상: ").concat(l,", 배경 색상: ").concat(c,"</p>\n            </div>\n          ")}))),o+='\n          </div>\n          \n          <div class="report-section">\n            <h2>웹 접근성 분석</h2>\n            <div class="summary-box">\n              <p>이 보고서는 한국형 웹 콘텐츠 접근성 지침 2.2를 기준으로 페이지를 분석한 결과입니다.</p>\n            </div>\n      ';for(var d=0,p=Object.entries(i);d<p.length;d++){var u=n(p[d],2),g=u[0],m=u[1];o+="<h3>".concat(m.name,"</h3>");var b=Array.from(document.querySelectorAll('#tab-content-wcag .guideline-item[data-category="'.concat(g,'"]')));0!==b.length&&b.forEach((function(n){var t,e,a=(null===(t=n.querySelector("h4"))||void 0===t?void 0:t.textContent.trim())||"",r=(null===(e=n.querySelector("p"))||void 0===e?void 0:e.textContent.trim())||"",i=n.classList.contains("pass")?"pass":n.classList.contains("fail")?"fail":"review",l=n.querySelector("p:nth-child(3)"),c=l?l.textContent.trim():"";o+='\n            <div class="'.concat(i,'-item">\n              <p><strong>').concat(a,"</strong></p>\n              <p>").concat(r,"</p>\n              ").concat(c?"<p>".concat(c,"</p>"):"","\n            </div>\n          ")}))}o+='\n          </div>\n          \n          <div class="report-section">\n            <h2>UDL 원칙 분석</h2>\n            <div class="summary-box">\n              <p>UDL(보편적 학습 설계) 원칙에 따른 웹 페이지 분석 결과입니다.</p>\n            </div>\n      ';for(var f=0,h=Object.entries(l);f<h.length;f++){var x=n(h[f],2),v=(x[0],x[1]);o+="\n          <h3>".concat(v.name,"</h3>\n          <p>").concat(v.desc,"</p>\n          <ul>\n        "),v.suggestions.forEach((function(n){o+="<li>".concat(n,"</li>")})),o+="</ul>"}var y=document.querySelector("#tab-content-udl .ai-response");y&&(o+='\n          <h3>AI 분석 결과</h3>\n          <div class="summary-box">\n            '.concat(y.innerHTML,"\n          </div>\n        ")),o+="\n          </div>\n          \n          <footer>\n            <p>이 보고서는 UDL 분석 도구에 의해 자동으로 생성되었습니다.</p>\n            <p>분석에 axe-core ".concat(window.axeResults?window.axeResults.testEngine.version:"","이 사용되었습니다.</p>\n            <p>생성일시: ").concat(e,"</p>\n          </footer>\n        </body>\n        </html>\n      ");var w=new Blob([o],{type:"text/html"}),k=URL.createObjectURL(w),A=document.createElement("a");A.href=k,A.download="".concat(t.replace(/\s+/g,"-"),"-접근성-보고서-").concat((new Date).toISOString().slice(0,10),".html"),document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(k)}()},document.getElementById("run-full-scan").onclick=function(){return(n=document.createElement("div")).className="alert-message",n.textContent="axe-core를 이용한 전체 검사를 시작합니다...",document.body.appendChild(n),void a().then((function(t){return n.textContent="axe-core 분석 중...",t.run(document,{resultTypes:["violations","incomplete","passes","inapplicable"],selectors:!0})})).then((function(t){n.textContent="색상 대비 분석 중...",window.axeResults=t,console.log("axe-core 분석 결과:",t),p("contrast"),u(),setTimeout((function(){n.textContent="WCAG 접근성 분석 중...",p("wcag"),h(),setTimeout((function(){n.textContent="UDL 학습성 분석 중...",p("udl"),x(),setTimeout((function(){n.textContent="전체 검사가 완료되었습니다!",p("summary"),setTimeout((function(){document.body.removeChild(n)}),3e3)}),1e3)}),1e3)}),1e3)})).catch((function(t){console.error("전체 스캔 중 오류 발생:",t),n.textContent="전체 검사 중 오류가 발생했습니다. 개별 검사를 진행합니다.",p("contrast"),u(),setTimeout((function(){p("wcag"),h(),setTimeout((function(){p("udl"),x(),setTimeout((function(){p("summary"),setTimeout((function(){document.body.removeChild(n)}),3e3)}),1e3)}),1e3)}),1e3)}));var n},u()}();
//# sourceMappingURL=udlAi.bundle.js.map